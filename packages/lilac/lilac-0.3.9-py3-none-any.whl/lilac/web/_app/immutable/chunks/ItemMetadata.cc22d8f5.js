import{S as fe,i as ce,s as ue,k as z,a as Q,q as de,e as I,l as M,m as T,h as k,c as x,r as he,n as R,_ as b,p as X,b as P,U as A,Y as be,v as Y,d as v,f as K,g as p,u as _e,O as ve,P as ke,$ as we,a0 as te,y as O,z as U,A as q,B,H as Se,V as $e,Z as ye}from"./index.cbae6e09.js";import{a9 as Ve,ar as Ee,al as N,_ as Pe,am as Ie,az as Fe,aR as Ne,a0 as Ae,ay as Re,aJ as De,d as Le,bV as Ce,aS as ze,bW as Me,bX as Te,ag as Ye}from"./Modal.c72f7b47.js";import{C as Ke,a as Oe}from"./ChevronUp.ef2a0929.js";import{s as le}from"./notificationsStore.e3e25007.js";function ne(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ue(r){let e,l;return e=new Ke({}),{c(){O(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function qe(r){let e,l;return e=new Oe({}),{c(){O(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ae(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=z("div"),t=de(l),this.h()},l(i){e=M(i,"DIV",{title:!0,class:!0});var s=T(e);t=he(s,l),s.forEach(k),this.h()},h(){var i,s;R(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),R(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(i,s){P(i,e,s),A(e,t)},p(i,s){var a,f,c;s&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&_e(t,l),s&1&&n!==(n=(f=i[0].value)==null?void 0:f.toString())&&R(e,"title",n),s&1&&b(e,"italic",!i[0].formattedValue&&!((c=i[0].children)!=null&&c.length))},d(i){i&&k(e)}}}function ie(r){let e,l=[],t=new Map,n,o,i=r[0].children;const s=a=>Ve(a[2].path);for(let a=0;a<i.length;a+=1){let f=ne(r,i,a),c=s(f);t.set(c,l[a]=re(c,f))}return{c(){e=z("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=M(a,"DIV",{});var f=T(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,f){P(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);o=!0},p(a,f){f&1&&(i=a[0].children,Y(),l=ve(l,f,s,1,a,i,t,e,ke,re,null,ne),K()),(!o||f&1)&&b(e,"bg-blue-100",a[0].isSignal),(!o||f&1)&&b(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!o){for(let f=0;f<i.length;f+=1)p(l[f]);a&&we(()=>{o&&(n||(n=te(e,le,{},!0)),n.run(1))}),o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);a&&(n||(n=te(e,le,{},!1)),n.run(0)),o=!1},d(a){a&&k(e);for(let f=0;f<l.length;f+=1)l[f].d();a&&n&&n.end()}}}function re(r,e){let l,t,n;return t=new ge({props:{node:e[2]}}),{key:r,first:null,c(){l=I(),O(t.$$.fragment),this.h()},l(o){l=I(),U(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,i){P(o,l,i),q(t,o,i),n=!0},p(o,i){e=o;const s={};i&1&&(s.node=e[2]),t.$set(s)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&k(l),B(t,o)}}}function Be(r){var W;let e,l,t,n,o,i,s=r[0].fieldName+"",a,f,c,d,g,S,y;const D=[qe,Ue],w=[];function H(u,h){return u[0].expanded?0:1}t=H(r),n=w[t]=D[t](r);let m=(r[0].formattedValue||!((W=r[0].children)!=null&&W.length))&&ae(r),_=r[0].children&&r[0].expanded&&ie(r);return{c(){e=z("div"),l=z("button"),n.c(),o=Q(),i=z("div"),a=de(s),f=Q(),m&&m.c(),c=Q(),_&&_.c(),d=I(),this.h()},l(u){e=M(u,"DIV",{class:!0});var h=T(e);l=M(h,"BUTTON",{class:!0});var $=T(l);n.l($),$.forEach(k),o=x(h),i=M(h,"DIV",{class:!0});var V=T(i);a=he(V,s),V.forEach(k),f=x(h),m&&m.l(h),h.forEach(k),c=x(u),_&&_.l(u),d=I(),this.h()},h(){var u;R(l,"class","p-1"),b(l,"invisible",!((u=r[0].children)!=null&&u.length)),R(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),X(i,"min-width","10ch"),R(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),X(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),X(e,"line-height","1.7rem")},m(u,h){P(u,e,h),A(e,l),w[t].m(l,null),A(e,o),A(e,i),A(i,a),A(e,f),m&&m.m(e,null),P(u,c,h),_&&_.m(u,h),P(u,d,h),g=!0,S||(y=be(l,"click",r[1]),S=!0)},p(u,[h]){var V,L;let $=t;t=H(u),t!==$&&(Y(),v(w[$],1,1,()=>{w[$]=null}),K(),n=w[t],n||(n=w[t]=D[t](u),n.c()),p(n,1),n.m(l,null)),(!g||h&1)&&b(l,"invisible",!((V=u[0].children)!=null&&V.length)),(!g||h&1)&&s!==(s=u[0].fieldName+"")&&_e(a,s),u[0].formattedValue||!((L=u[0].children)!=null&&L.length)?m?m.p(u,h):(m=ae(u),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!g||h&1)&&b(e,"bg-blue-100",u[0].isSignal),(!g||h&1)&&b(e,"bg-emerald-100",u[0].isPreviewSignal),(!g||h&1)&&b(e,"bg-teal-100",u[0].isLabel),h&1&&X(e,"padding-left",.25+(u[0].path.length-1)*.5+"rem"),u[0].children&&u[0].expanded?_?(_.p(u,h),h&1&&p(_,1)):(_=ie(u),_.c(),p(_,1),_.m(d.parentNode,d)):_&&(Y(),v(_,1,1,()=>{_=null}),K())},i(u){g||(p(n),p(_),g=!0)},o(u){v(n),v(_),g=!1},d(u){u&&k(e),w[t].d(),m&&m.d(),u&&k(c),_&&_.d(u),u&&k(d),S=!1,y()}}}function me(r){r.expanded=!0,r.children&&r.children.forEach(me)}function He(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&me(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ge extends fe{constructor(e){super(),ce(this,e,He,Be,ue,{node:0})}}function se(r,e,l){const t=r.slice();return t[7]=e[l],t}function We(r){let e,l;return e=new Le({props:{lines:3,paragraph:!0,class:"w-full"}}),{c(){O(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p:$e,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function je(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=oe(se(r,t,i));const o=i=>v(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=I()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=I()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);P(i,e,s),l=!0},p(i,s){if(s&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const f=se(i,t,a);n[a]?(n[a].p(f,s),p(n[a],1)):(n[a]=oe(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(Y(),a=t.length;a<n.length;a+=1)o(a);K()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)p(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)v(n[s]);l=!1},d(i){ye(n,i),i&&k(e)}}}function oe(r){let e,l;return e=new ge({props:{node:r[7]}}),{c(){O(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Je(r){let e,l,t,n;const o=[je,We],i=[];function s(a,f){return a[0]?0:1}return e=s(r),l=i[e]=o[e](r),{c(){l.c(),t=I()},l(a){l.l(a),t=I()},m(a,f){i[e].m(a,f),P(a,t,f),n=!0},p(a,[f]){let c=e;e=s(a),e===c?i[e].p(a,f):(Y(),v(i[c],1,1,()=>{i[c]=null}),K(),l=i[e],l?l.p(a,f):(l=i[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){i[e].d(a),a&&k(t)}}}function Xe(r,e,l){let t,n,{row:o=void 0}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:s}=e;const a=Ee();Se(r,a,c=>l(5,n=c));function f(c){var u,h,$,V,L;const d=N.field(c),g=N.path(c);let S=N.value(c),y=N.span(c);if(((u=d==null?void 0:d.dtype)==null?void 0:u.type)==="string_span"&&(y=y||S,y!=null)){const E=[];for(let F=g.length-1;F>=0;F--){const Z=g.slice(0,F),j=Pe(i.schema,Z);let C=null;if(((h=j.map)==null?void 0:h.input_path)!=null?C=j.map.input_path:(($=j.dtype)==null?void 0:$.type)==="string"&&(C=Z),C!=null){const G=o!=null?Ie(o,C):null;if(G){const J=N.value(G);if(J){E.push(J.slice(y.start,y.end));break}}}}S=E}const D=((V=n.data)==null?void 0:V.some(E=>{var F;return E.name===((F=d==null?void 0:d.signal)==null?void 0:F.signal_name)}))||!1,w=d?Fe(d):!1,H=d?Ne(d):!1;let m;D||w&&(d==null?void 0:d.dtype)==null||((L=d==null?void 0:d.dtype)==null?void 0:L.type)==="embedding"||(d==null?void 0:d.repeated_field)!=null?m="":S==null?m=null:m=Ae(S);function _(E){const{[Ce]:F,[ze]:Z,[Me]:j,[Te]:C,[Ye]:G,...J}=E;return Object.values(J).filter(pe=>{var ee;return((ee=N.field(pe))==null?void 0:ee.label)==null})}const W=s.some(E=>Re(E.path,g));return{children:Array.isArray(c)?c.map(f):_(c).map(f),fieldName:g[g.length-1],field:d,path:g,expanded:W,isSignal:w,isLabel:H,isPreviewSignal:i!=null?De(i,g):!1,isEmbeddingSignal:D,value:S,formattedValue:m}}return r.$$set=c=>{"row"in c&&l(2,o=c.row),"selectRowsSchema"in c&&l(3,i=c.selectRowsSchema),"highlightedFields"in c&&l(4,s=c.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=o!=null?f(o):null)},[t,a,o,i,s]}class et extends fe{constructor(e){super(),ce(this,e,Xe,Je,ue,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{et as I};
