import{S as ve,i as we,s as ke,L as he,Q as re,R as ie,m as w,h as u,n as $,T as ye,b as F,U as h,M as qe,V as K,W as ze,X as Re,q as L,r as Z,u as se,w as Te,J as Ae,k as C,y as q,a as Q,l as I,z as U,c as G,A as W,K as Se,g as V,v as oe,f as ce,d as M,B as j,Z as Ue,I as Nt,_ as Me,Y as Ge,a3 as We,a5 as $t,a4 as Vt,a2 as xe,p as Ke,H as Ce,o as Bt,aa as Pe,e as Le,ah as Dt}from"./index.cbae6e09.js";import{g as Ct}from"./navigation.fe22b4d6.js";import{R as Ft,e as je,a0 as De,bh as Ht,D as Qe,bi as Je,S as Ot,ar as It,bj as Lt,bk as Zt,bl as Yt,bm as qt,ba as Ut,d as Mt,b as Wt,al as Be,am as Fe,ag as He,bn as jt,bo as Qt,bp as Tt,aW as et,g as At,a8 as Gt,bq as Kt,bg as St,E as yt,a as Jt,i as Xt,br as xt}from"./Modal.54eb1296.js";import{T as Xe}from"./ToastNotification.82e8a3ac.js";import{S as el,T as zt,a as Rt}from"./StringSpanHighlight.87a2ded3.js";import{D as Pt,E as Oe}from"./DatasetFieldEmbeddingSelector.36a37ffc.js";import{T as tl}from"./TrashCan.39105716.js";import{g as ll}from"./settingsStore.a422cf6e.js";import{T as nl,c as tt}from"./colors.051b4cfc.js";function lt(s){let e,t;return{c(){e=re("title"),t=L(s[1])},l(l){e=ie(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&se(t,l[1])},d(l){l&&u(e)}}}function sl(s){let e,t,l,n=s[1]&&lt(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let a=0;a<o.length;a+=1)r=he(r,o[a]);return{c(){e=re("svg"),n&&n.c(),t=re("path"),l=re("path"),this.h()},l(a){e=ie(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=ie(i,"path",{d:!0}),w(t).forEach(u),l=ie(i,"path",{d:!0}),w(l).forEach(u),i.forEach(u),this.h()},h(){$(t,"d","M11,11V21H21V11Zm8,8H13V13h6Z"),$(l,"d","M30,13V11H26V8a2,2,0,0,0-2-2H21V2H19V6H13V2H11V6H8A2,2,0,0,0,6,8v3H2v2H6v6H2v2H6v3a2,2,0,0,0,2,2h3v4h2V26h6v4h2V26h3a2,2,0,0,0,2-2V21h4V19H26V13ZM24,24H8V8H24Z"),ye(e,r)},m(a,i){F(a,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[i]){a[1]?n?n.p(a,i):(n=lt(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),ye(e,r=qe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&u(e),n&&n.d()}}}function al(s,e,t){let l,n;const o=["size","title"];let r=ze(e,o),{size:a=16}=e,{title:i=void 0}=e;return s.$$set=c=>{t(5,e=he(he({},e),Re(c))),t(3,r=ze(e,o)),"size"in c&&t(0,a=c.size),"title"in c&&t(1,i=c.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Re(e),[a,i,n,r,l]}class nt extends ve{constructor(e){super(),we(this,e,al,sl,ke,{size:0,title:1})}}function st(s){let e,t;return{c(){e=re("title"),t=L(s[1])},l(l){e=ie(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&se(t,l[1])},d(l){l&&u(e)}}}function rl(s){let e,t,l=s[1]&&st(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=he(o,n[r]);return{c(){e=re("svg"),l&&l.c(),t=re("path"),this.h()},l(r){e=ie(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=w(e);l&&l.l(a),t=ie(a,"path",{d:!0}),w(t).forEach(u),a.forEach(u),this.h()},h(){$(t,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),ye(e,o)},m(r,a){F(r,e,a),l&&l.m(e,null),h(e,t)},p(r,[a]){r[1]?l?l.p(r,a):(l=st(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),ye(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:K,o:K,d(r){r&&u(e),l&&l.d()}}}function il(s,e,t){let l,n;const o=["size","title"];let r=ze(e,o),{size:a=16}=e,{title:i=void 0}=e;return s.$$set=c=>{t(5,e=he(he({},e),Re(c))),t(3,r=ze(e,o)),"size"in c&&t(0,a=c.size),"title"in c&&t(1,i=c.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Re(e),[a,i,n,r,l]}class wn extends ve{constructor(e){super(),we(this,e,il,rl,ke,{size:0,title:1})}}function at(s){let e,t;return{c(){e=re("title"),t=L(s[1])},l(l){e=ie(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&se(t,l[1])},d(l){l&&u(e)}}}function ol(s){let e,t,l,n=s[1]&&at(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let a=0;a<o.length;a+=1)r=he(r,o[a]);return{c(){e=re("svg"),n&&n.c(),t=re("path"),l=re("path"),this.h()},l(a){e=ie(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=ie(i,"path",{d:!0}),w(t).forEach(u),l=ie(i,"path",{d:!0}),w(l).forEach(u),i.forEach(u),this.h()},h(){$(t,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),$(l,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),ye(e,r)},m(a,i){F(a,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[i]){a[1]?n?n.p(a,i):(n=at(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),ye(e,r=qe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&u(e),n&&n.d()}}}function cl(s,e,t){let l,n;const o=["size","title"];let r=ze(e,o),{size:a=16}=e,{title:i=void 0}=e;return s.$$set=c=>{t(5,e=he(he({},e),Re(c))),t(3,r=ze(e,o)),"size"in c&&t(0,a=c.size),"title"in c&&t(1,i=c.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Re(e),[a,i,n,r,l]}class fl extends ve{constructor(e){super(),we(this,e,cl,ol,ke,{size:0,title:1})}}function rt(s){let e,t;return{c(){e=re("title"),t=L(s[1])},l(l){e=ie(l,"title",{});var n=w(e);t=Z(n,s[1]),n.forEach(u)},m(l,n){F(l,e,n),h(e,t)},p(l,n){n&2&&se(t,l[1])},d(l){l&&u(e)}}}function ul(s){let e,t,l,n=s[1]&&rt(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let a=0;a<o.length;a+=1)r=he(r,o[a]);return{c(){e=re("svg"),n&&n.c(),t=re("path"),l=re("path"),this.h()},l(a){e=ie(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=w(e);n&&n.l(i),t=ie(i,"path",{d:!0}),w(t).forEach(u),l=ie(i,"path",{d:!0}),w(l).forEach(u),i.forEach(u),this.h()},h(){$(t,"d","M5.24,22.51l1.43-1.42A14.06,14.06,0,0,1,3.07,16C5.1,10.93,10.7,7,16,7a12.38,12.38,0,0,1,4,.72l1.55-1.56A14.72,14.72,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16,16,0,0,0,5.24,22.51Z"),$(l,"d","M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66A16.4 16.4 0 0025.2 8.22L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27 16.69 16.69 0 0030.94 16.34 1 1 0 0030.94 15.66zM20 16a4 4 0 01-6 3.44L19.44 14A4 4 0 0120 16zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"),ye(e,r)},m(a,i){F(a,e,i),n&&n.m(e,null),h(e,t),h(e,l)},p(a,[i]){a[1]?n?n.p(a,i):(n=rt(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),ye(e,r=qe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&u(e),n&&n.d()}}}function dl(s,e,t){let l,n;const o=["size","title"];let r=ze(e,o),{size:a=16}=e,{title:i=void 0}=e;return s.$$set=c=>{t(5,e=he(he({},e),Re(c))),t(3,r=ze(e,o)),"size"in c&&t(0,a=c.size),"title"in c&&t(1,i=c.title)},s.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||i),t(2,n={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Re(e),[a,i,n,r,l]}class ml extends ve{constructor(e){super(),we(this,e,dl,ul,ke,{size:0,title:1})}}function it(s,e,t){const l=s.slice();return l[7]=e[t],l}function ot(s){let e,t,l=s[7].text+"",n,o,r,a,i,c,f,g,d,_,b;i=new tl({props:{size:16}});function v(){return s[6](s[7])}return{c(){e=C("div"),t=C("span"),n=L(l),o=Q(),r=C("div"),a=C("button"),q(i.$$.fragment),g=Q(),this.h()},l(k){e=I(k,"DIV",{class:!0});var p=w(e);t=I(p,"SPAN",{class:!0});var m=w(t);n=Z(m,l),m.forEach(u),o=G(p),r=I(p,"DIV",{});var D=w(r);a=I(D,"BUTTON",{title:!0,class:!0});var E=w(a);U(i.$$.fragment,E),E.forEach(u),D.forEach(u),g=G(p),p.forEach(u),this.h()},h(){$(t,"class","shrink"),$(a,"title","Remove sample"),$(a,"class","shrink-0 opacity-50 hover:text-red-400 hover:opacity-100"),a.disabled=c=!s[1],Me(r,"opacity-40",!s[1]),$(e,"class","flex w-full justify-between gap-x-2 border-b border-gray-200 p-2 hover:bg-gray-50")},m(k,p){F(k,e,p),h(e,t),h(t,n),h(e,o),h(e,r),h(r,a),W(i,a,null),h(e,g),d=!0,_||(b=[Ge(a,"click",v),We(f=je.call(null,r,{text:s[1]?"":"User does not have access to edit this concept."}))],_=!0)},p(k,p){s=k,(!d||p&1)&&l!==(l=s[7].text+"")&&se(n,l),(!d||p&2&&c!==(c=!s[1]))&&(a.disabled=c),f&&$t(f.update)&&p&2&&f.update.call(null,{text:s[1]?"":"User does not have access to edit this concept."}),(!d||p&2)&&Me(r,"opacity-40",!s[1])},i(k){d||(V(i.$$.fragment,k),d=!0)},o(k){M(i.$$.fragment,k),d=!1},d(k){k&&u(e),j(i),_=!1,Vt(b)}}}function hl(s){let e,t,l,n,o,r;function a(d){s[4](d)}let i={labelText:"Add example"};s[2]!==void 0&&(i.value=s[2]),t=new Ft({props:i}),Te.push(()=>Ae(t,"value",a)),t.$on("keydown",s[5]);let c=[...s[0]].reverse(),f=[];for(let d=0;d<c.length;d+=1)f[d]=ot(it(s,c,d));const g=d=>M(f[d],1,1,()=>{f[d]=null});return{c(){e=C("div"),q(t.$$.fragment),n=Q(),o=C("div");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){e=I(d,"DIV",{class:!0});var _=w(e);U(t.$$.fragment,_),_.forEach(u),n=G(d),o=I(d,"DIV",{class:!0});var b=w(o);for(let v=0;v<f.length;v+=1)f[v].l(b);b.forEach(u),this.h()},h(){$(e,"class",""),$(o,"class","flex h-full w-full flex-col overflow-y-auto overflow-x-clip border border-gray-200")},m(d,_){F(d,e,_),W(t,e,null),F(d,n,_),F(d,o,_);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(o,null);r=!0},p(d,[_]){const b={};if(!l&&_&4&&(l=!0,b.value=d[2],Se(()=>l=!1)),t.$set(b),_&11){c=[...d[0]].reverse();let v;for(v=0;v<c.length;v+=1){const k=it(d,c,v);f[v]?(f[v].p(k,_),V(f[v],1)):(f[v]=ot(k),f[v].c(),V(f[v],1),f[v].m(o,null))}for(oe(),v=c.length;v<f.length;v+=1)g(v);ce()}},i(d){if(!r){V(t.$$.fragment,d);for(let _=0;_<c.length;_+=1)V(f[_]);r=!0}},o(d){M(t.$$.fragment,d),f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)M(f[_]);r=!1},d(d){d&&u(e),j(t),d&&u(n),d&&u(o),Ue(f,d)}}}function _l(s,e,t){let{data:l}=e,{canEditConcept:n}=e,o;const r=Nt();function a(f){o=f,t(2,o)}const i=f=>{f.key==="Enter"&&(r("add",o),t(2,o=""))},c=f=>r("remove",f.id);return s.$$set=f=>{"data"in f&&t(0,l=f.data),"canEditConcept"in f&&t(1,n=f.canEditConcept)},[l,n,o,r,a,i,c]}class ct extends ve{constructor(e){super(),we(this,e,_l,hl,ke,{data:0,canEditConcept:1})}}const Ze={not_good:"text-red-600",ok:"text-yellow-600",good:"text-green-600",very_good:"text-blue-600",great:"text-purple-600"},Ye={not_good:"Not good",ok:"OK",good:"Good",very_good:"Very good",great:"Great"};function pl(s){let e,t,l,n,o,r=Ye[s[0].overall]+"",a,i,c,f,g,d,_,b=De(s[0].f1)+"",v,k,p,m,D,E,S=De(s[0].recall)+"",T,z,R,Y,B,y,A=De(s[0].precision)+"",X,H,x,te,_e,de,pe=De(s[0].roc_auc)+"",Ee;return{c(){e=C("table"),t=C("tr"),l=C("td"),n=L("Overall score"),o=C("td"),a=L(r),c=Q(),f=C("tr"),g=C("td"),d=L("F1"),_=C("td"),v=L(b),k=Q(),p=C("tr"),m=C("td"),D=L("Recall"),E=C("td"),T=L(S),z=Q(),R=C("tr"),Y=C("td"),B=L("Precision"),y=C("td"),X=L(A),H=Q(),x=C("tr"),te=C("td"),_e=L("Area under ROC"),de=C("td"),Ee=L(pe),this.h()},l(le){e=I(le,"TABLE",{class:!0});var J=w(e);t=I(J,"TR",{});var N=w(t);l=I(N,"TD",{class:!0});var ae=w(l);n=Z(ae,"Overall score"),ae.forEach(u),o=I(N,"TD",{class:!0});var Ie=w(o);a=Z(Ie,r),Ie.forEach(u),N.forEach(u),c=G(J),f=I(J,"TR",{});var ee=w(f);g=I(ee,"TD",{class:!0});var ne=w(g);d=Z(ne,"F1"),ne.forEach(u),_=I(ee,"TD",{class:!0});var Ne=w(_);v=Z(Ne,b),Ne.forEach(u),ee.forEach(u),k=G(J),p=I(J,"TR",{});var P=w(p);m=I(P,"TD",{class:!0});var O=w(m);D=Z(O,"Recall"),O.forEach(u),E=I(P,"TD",{class:!0});var fe=w(E);T=Z(fe,S),fe.forEach(u),P.forEach(u),z=G(J),R=I(J,"TR",{});var ue=w(R);Y=I(ue,"TD",{class:!0});var $e=w(Y);B=Z($e,"Precision"),$e.forEach(u),y=I(ue,"TD",{class:!0});var Ve=w(y);X=Z(Ve,A),Ve.forEach(u),ue.forEach(u),H=G(J),x=I(J,"TR",{});var me=w(x);te=I(me,"TD",{class:!0});var ge=w(te);_e=Z(ge,"Area under ROC"),ge.forEach(u),de=I(me,"TD",{class:!0});var be=w(de);Ee=Z(be,pe),be.forEach(u),me.forEach(u),J.forEach(u),this.h()},h(){$(l,"class","svelte-zc5pc5"),$(o,"class",i=xe(Ze[s[0].overall])+" svelte-zc5pc5"),$(g,"class","svelte-zc5pc5"),$(_,"class","svelte-zc5pc5"),$(m,"class","svelte-zc5pc5"),$(E,"class","svelte-zc5pc5"),$(Y,"class","svelte-zc5pc5"),$(y,"class","svelte-zc5pc5"),$(te,"class","svelte-zc5pc5"),$(de,"class","svelte-zc5pc5"),$(e,"class","svelte-zc5pc5")},m(le,J){F(le,e,J),h(e,t),h(t,l),h(l,n),h(t,o),h(o,a),h(e,c),h(e,f),h(f,g),h(g,d),h(f,_),h(_,v),h(e,k),h(e,p),h(p,m),h(m,D),h(p,E),h(E,T),h(e,z),h(e,R),h(R,Y),h(Y,B),h(R,y),h(y,X),h(e,H),h(e,x),h(x,te),h(te,_e),h(x,de),h(de,Ee)},p(le,[J]){J&1&&r!==(r=Ye[le[0].overall]+"")&&se(a,r),J&1&&i!==(i=xe(Ze[le[0].overall])+" svelte-zc5pc5")&&$(o,"class",i),J&1&&b!==(b=De(le[0].f1)+"")&&se(v,b),J&1&&S!==(S=De(le[0].recall)+"")&&se(T,S),J&1&&A!==(A=De(le[0].precision)+"")&&se(X,A),J&1&&pe!==(pe=De(le[0].roc_auc)+"")&&se(Ee,pe)},i:K,o:K,d(le){le&&u(e)}}}function gl(s,e,t){let{metrics:l}=e;return s.$$set=n=>{"metrics"in n&&t(0,l=n.metrics)},[l]}class ft extends ve{constructor(e){super(),we(this,e,gl,pl,ke,{metrics:0})}}function bl(s){const e=s.slice(),t=!0;return e[7]=t,e}function vl(s){let e,t;function l(){return s[6](s[7])}return e=new Qe({props:{icon:s[4].isLoading?Je:nt,class:"w-28 text-3xl",$$slots:{default:[El]},$$scope:{ctx:s}}}),e.$on("click",l),{c(){q(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,o){W(e,n,o),t=!0},p(n,o){s=n;const r={};o&16&&(r.icon=s[4].isLoading?Je:nt),o&256&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function wl(s){let e,t=Ye[s[2].metrics.overall]+"",l,n,o,r,a;return{c(){e=C("div"),l=L(t),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=w(e);l=Z(c,t),c.forEach(u),this.h()},h(){$(e,"class",n="concept-score-pill cursor-default text-2xl font-light "+Ze[s[2].metrics.overall])},m(i,c){F(i,e,c),h(e,l),r||(a=We(o=je.call(null,e,{component:ft,props:{metrics:s[2].metrics}})),r=!0)},p(i,c){c&4&&t!==(t=Ye[i[2].metrics.overall]+"")&&se(l,t),c&4&&n!==(n="concept-score-pill cursor-default text-2xl font-light "+Ze[i[2].metrics.overall])&&$(e,"class",n),o&&$t(o.update)&&c&4&&o.update.call(null,{component:ft,props:{metrics:i[2].metrics}})},i:K,o:K,d(i){i&&u(e),r=!1,a()}}}function kl(s){let e,t,l;return t=new Je({}),{c(){e=C("div"),q(t.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var o=w(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){$(e,"class","flex flex-col items-center")},m(n,o){F(n,e,o),W(t,e,null),l=!0},p:K,i(n){l||(V(t.$$.fragment,n),l=!0)},o(n){M(t.$$.fragment,n),l=!1},d(n){n&&u(e),j(t)}}}function El(s){let e;return{c(){e=L("Compute")},l(t){e=Z(t,"Compute")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function $l(s){let e,t,l,n,o,r,a;const i=[kl,wl,vl],c=[];function f(d,_){var b;return d[3]?0:(b=d[2])!=null&&b.metrics?1:2}function g(d,_){return _===2?bl(d):d}return o=f(s),r=c[o]=i[o](g(s,o)),{c(){e=C("div"),t=C("div"),l=L(s[1]),n=Q(),r.c(),this.h()},l(d){e=I(d,"DIV",{class:!0,style:!0});var _=w(e);t=I(_,"DIV",{class:!0});var b=w(t);l=Z(b,s[1]),b.forEach(u),n=G(_),r.l(_),_.forEach(u),this.h()},h(){$(t,"class","text-gray-500"),$(e,"class","flex w-36 flex-col items-center gap-y-2 rounded-md border border-b-0 border-gray-200 p-4 shadow-md"),Ke(e,"height","103px")},m(d,_){F(d,e,_),h(e,t),h(t,l),h(e,n),c[o].m(e,null),a=!0},p(d,[_]){(!a||_&2)&&se(l,d[1]);let b=o;o=f(d),o===b?c[o].p(g(d,o),_):(oe(),M(c[b],1,1,()=>{c[b]=null}),ce(),r=c[o],r?r.p(g(d,o),_):(r=c[o]=i[o](g(d,o)),r.c()),V(r,1),r.m(e,null))},i(d){a||(V(r),a=!0)},o(d){M(r),a=!1},d(d){d&&u(e),c[o].d()}}}function Vl(s,e,t){let l,{concept:n}=e,{embedding:o}=e,{model:r}=e,{isFetching:a}=e;const i=Ht();Ce(s,i,f=>t(4,l=f));const c=f=>l.mutate([n.namespace,n.concept_name,o,f]);return s.$$set=f=>{"concept"in f&&t(0,n=f.concept),"embedding"in f&&t(1,o=f.embedding),"model"in f&&t(2,r=f.model),"isFetching"in f&&t(3,a=f.isFetching)},[n,o,r,a,l,i,c]}class Dl extends ve{constructor(e){super(),we(this,e,Vl,$l,ke,{concept:0,embedding:1,model:2,isFetching:3})}}function ut(s,e,t){const l=s.slice();return l[22]=e[t],l}function Cl(s){let e;return{c(){e=L("Compute")},l(t){e=Z(t,"Compute")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function dt(s){let e,t;return e=new Wt({props:{value:s[22].name}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const o={};n&1024&&(o.value=l[22].name),e.$set(o)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Il(s){var r;let e,t,l=((r=s[10])==null?void 0:r.data)||[],n=[];for(let a=0;a<l.length;a+=1)n[a]=dt(ut(s,l,a));const o=a=>M(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Le()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=Le()},m(a,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(a,i);F(a,e,i),t=!0},p(a,i){var c;if(i&1024){l=((c=a[10])==null?void 0:c.data)||[];let f;for(f=0;f<l.length;f+=1){const g=ut(a,l,f);n[f]?(n[f].p(g,i),V(n[f],1)):(n[f]=dt(g),n[f].c(),V(n[f],1),n[f].m(e.parentNode,e))}for(oe(),f=l.length;f<n.length;f+=1)o(f);ce()}},i(a){if(!t){for(let i=0;i<l.length;i+=1)V(n[i]);t=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)M(n[i]);t=!1},d(a){Ue(n,a),a&&u(e)}}}function Ml(s){let e,t,l,n,o,r=s[2].toFixed(3)+"",a,i,c,f;return c=new el({props:{text:s[0],row:s[5],spanPaths:s[7],spanValueInfos:s[6],embeddings:s[1]?[s[1]]:[]}}),{c(){e=C("div"),t=C("span"),l=L("Max score:"),n=Q(),o=C("span"),a=L(r),i=Q(),q(c.$$.fragment),this.h()},l(g){e=I(g,"DIV",{class:!0});var d=w(e);t=I(d,"SPAN",{class:!0});var _=w(t);l=Z(_,"Max score:"),_.forEach(u),n=G(d),o=I(d,"SPAN",{class:!0});var b=w(o);a=Z(b,r),b.forEach(u),d.forEach(u),i=G(g),U(c.$$.fragment,g),this.h()},h(){$(t,"class","font-medium"),$(o,"class","rounded p-0.5"),Ke(o,"background-color",tt(s[2])),$(e,"class","my-2")},m(g,d){F(g,e,d),h(e,t),h(t,l),h(e,n),h(e,o),h(o,a),F(g,i,d),W(c,g,d),f=!0},p(g,d){(!f||d&4)&&r!==(r=g[2].toFixed(3)+"")&&se(a,r),d&4&&Ke(o,"background-color",tt(g[2]));const _={};d&1&&(_.text=g[0]),d&32&&(_.row=g[5]),d&128&&(_.spanPaths=g[7]),d&64&&(_.spanValueInfos=g[6]),d&2&&(_.embeddings=g[1]?[g[1]]:[]),c.$set(_)},i(g){f||(V(c.$$.fragment,g),f=!0)},o(g){M(c.$$.fragment,g),f=!1},d(g){g&&u(e),g&&u(i),j(c,g)}}}function Tl(s){let e,t;return e=new Mt({}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:K,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Al(s){let e,t,l,n,o,r,a,i,c,f,g,d,_,b,v,k;l=new nl({props:{value:s[4],cols:50,placeholder:"Paste text to try the concept.",rows:6,class:"mb-2"}}),l.$on("input",s[13]),a=new Qe({props:{$$slots:{default:[Cl]},$$scope:{ctx:s}}}),a.$on("click",s[19]);function p(T){s[20](T)}let m={labelText:"Embedding",$$slots:{default:[Il]},$$scope:{ctx:s}};s[1]!==void 0&&(m.selected=s[1]),f=new Ot({props:m}),Te.push(()=>Ae(f,"selected",p));const D=[Tl,Ml],E=[];function S(T,z){var R;return T[8]&&((R=T[3])!=null&&R.isFetching)?0:T[5]!=null&&T[0]!=null?1:-1}return~(b=S(s))&&(v=E[b]=D[b](s)),{c(){e=C("div"),t=C("div"),q(l.$$.fragment),n=Q(),o=C("div"),r=C("div"),q(a.$$.fragment),i=Q(),c=C("div"),q(f.$$.fragment),d=Q(),_=C("div"),v&&v.c(),this.h()},l(T){e=I(T,"DIV",{class:!0});var z=w(e);t=I(z,"DIV",{});var R=w(t);U(l.$$.fragment,R),n=G(R),o=I(R,"DIV",{class:!0});var Y=w(o);r=I(Y,"DIV",{class:!0});var B=w(r);U(a.$$.fragment,B),B.forEach(u),i=G(Y),c=I(Y,"DIV",{class:!0});var y=w(c);U(f.$$.fragment,y),y.forEach(u),Y.forEach(u),R.forEach(u),d=G(z),_=I(z,"DIV",{class:!0});var A=w(_);v&&v.l(A),A.forEach(u),z.forEach(u),this.h()},h(){$(r,"class","pt-4"),$(c,"class","mb-2 w-32"),$(o,"class","flex flex-row justify-between"),$(_,"class","mt-4 border-gray-200"),Me(_,"border-t",s[0]!=null),$(e,"class","flex flex-col gap-x-8")},m(T,z){F(T,e,z),h(e,t),W(l,t,null),h(t,n),h(t,o),h(o,r),W(a,r,null),h(o,i),h(o,c),W(f,c,null),h(e,d),h(e,_),~b&&E[b].m(_,null),k=!0},p(T,[z]){const R={};z&16&&(R.value=T[4]),l.$set(R);const Y={};z&33554432&&(Y.$$scope={dirty:z,ctx:T}),a.$set(Y);const B={};z&33555456&&(B.$$scope={dirty:z,ctx:T}),!g&&z&2&&(g=!0,B.selected=T[1],Se(()=>g=!1)),f.$set(B);let y=b;b=S(T),b===y?~b&&E[b].p(T,z):(v&&(oe(),M(E[y],1,1,()=>{E[y]=null}),ce()),~b?(v=E[b],v?v.p(T,z):(v=E[b]=D[b](T),v.c()),V(v,1),v.m(_,null)):v=null),(!k||z&1)&&Me(_,"border-t",T[0]!=null)},i(T){k||(V(l.$$.fragment,T),V(a.$$.fragment,T),V(f.$$.fragment,T),V(v),k=!0)},o(T){M(l.$$.fragment,T),M(a.$$.fragment,T),M(f.$$.fragment,T),M(v),k=!1},d(T){T&&u(e),j(l),j(a),j(f),~b&&E[b].d()}}}function Sl(s,e,t){var X;let l,n,o,r,a=K,i=()=>(a(),a=Pe(o,H=>t(3,r=H)),o),c,f=K,g=()=>(f(),f=Pe(n,H=>t(18,c=H)),n),d,_;s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>f());let{concept:b}=e,{example:v}=e;const k=It();Ce(s,k,H=>t(10,_=H));const p=ll();Ce(s,p,H=>t(21,d=H));let m=(X=v.text)==null?void 0:X.trim();Bt(()=>{T()});function D(H){t(4,m=H.target.value),t(0,E=void 0)}let E,S=d.embedding;function T(){t(0,E=m)}let z,R,Y,B;const y=()=>T();function A(H){S=H,t(1,S)}return s.$$set=H=>{"concept"in H&&t(15,b=H.concept),"example"in H&&t(16,v=H.example)},s.$$.update=()=>{var H;if(s.$$.dirty&65536&&v.text&&(t(4,m=v.text.trim()),t(0,E=void 0)),s.$$.dirty&32770&&t(17,l={signal_name:"concept_score",concept_name:b.concept_name,namespace:b.namespace,embedding:S}),s.$$.dirty&131072&&g(t(9,n=l.embedding?Lt({signal:l}):void 0)),s.$$.dirty&32771&&i(t(8,o=S!=null&&E!=null?Zt(b.namespace,b.concept_name,S,{examples:[{text:E}]}):null)),s.$$.dirty&393226&&(r==null?void 0:r.data)!=null&&S!=null&&((H=c==null?void 0:c.data)==null?void 0:H.fields)!=null){const x=Yt(c.data.fields);x.signal=l,t(5,z=qt(r.data[0],x));const te=Ut(x);t(7,Y=te.spanPaths),t(6,R=te.spanValueInfos)}if(s.$$.dirty&12&&(r==null?void 0:r.data)!=null){t(2,B=0);for(const x of r.data[0]){const te=x.score;t(2,B=Math.max(te,B))}}},[E,S,B,r,m,z,R,Y,o,n,_,k,p,D,T,b,v,l,c,y,A]}class yl extends ve{constructor(e){super(),we(this,e,Sl,Al,ke,{concept:15,example:16})}}function zl(s,e,t,l,n,o){const r={...s};if(e==null||t==null)return r;const a=[...e,...t],i=new Set,c=[];for(const b of a){const v=Be.value(Fe(b,[He]),"string");if(v==null||i.has(v))continue;i.add(v);const k=jt(b,n);for(const p of k){const m=Be.value(p,"string");if(m==null)continue;const D=`${l.namespace}/${l.concept_name}`,E=Fe(p,[`${D}/${o}/preview`]);if(E==null)continue;const S=Fe(p,[`${D}/labels/preview`]),T=[];if(S!=null)for(const z of S){const R=Be.span(z);R!=null&&T.push(R)}for(const z of E){const R=Be.span(z);if(R==null||!T.every(A=>A.start>R.end||A.end<R.start))continue;const B=Fe(z,["score"]);if(B==null)continue;const y=Be.value(B,"float32");y!=null&&c.push({rowid:v,text:m,span:R,score:y})}}}function f(b){return{rowid:b.rowid,text:Qt(b.text,b.span.start,b.span.end),score:b.score}}c.sort((b,v)=>v.score-b.score);const g=c[0],d=c.slice().reverse().find(b=>b!=g);c.sort((b,v)=>Math.abs(b.score-.5)-Math.abs(v.score-.5));const _=c.find(b=>b!=g&&b!=d);return g!=null&&r.positive==null&&(r.positive=f(g)),_!=null&&r.neutral==null&&(r.neutral=f(_)),d!=null&&r.negative==null&&(r.negative=f(d)),r}function mt(s,e,t){const l=s.slice();return l[21]=e[t],l}function Rl(s){const e=s.slice(),t=Fl(e[21].score);e[24]=t;const l=Hl(e[21].score);return e[25]=l,e}function Pl(s){let e,t,l,n,o,r,a,i,c,f=s[21].text+"",g,d,_,b=s[25]+"",v,k,p=De(s[21].score,2)+"",m,D,E,S,T,z;n=new zt({});function R(){return s[18](s[21])}a=new Rt({});function Y(){return s[19](s[21])}return{c(){e=C("div"),t=C("div"),l=C("button"),q(n.$$.fragment),o=Q(),r=C("button"),q(a.$$.fragment),i=Q(),c=C("div"),g=L(f),d=Q(),_=C("div"),v=L(b),k=Q(),m=L(p),D=Q(),this.h()},l(B){e=I(B,"DIV",{class:!0});var y=w(e);t=I(y,"DIV",{class:!0});var A=w(t);l=I(A,"BUTTON",{class:!0});var X=w(l);U(n.$$.fragment,X),X.forEach(u),o=G(A),r=I(A,"BUTTON",{class:!0});var H=w(r);U(a.$$.fragment,H),H.forEach(u),A.forEach(u),i=G(y),c=I(y,"DIV",{class:!0});var x=w(c);g=Z(x,f),x.forEach(u),d=G(y),_=I(y,"DIV",{class:!0});var te=w(_);v=Z(te,b),k=G(te),m=Z(te,p),te.forEach(u),D=G(y),y.forEach(u),this.h()},h(){$(l,"class","p-2 hover:bg-gray-200"),Me(l,"text-blue-500",s[21].label===!0),$(r,"class","p-2 hover:bg-gray-200"),Me(r,"text-red-500",s[21].label===!1),$(t,"class","mr-2 flex flex-shrink-0 gap-x-1"),$(c,"class","flex-grow"),$(_,"class","w-40 flex-shrink-0 text-right"),$(e,"class",E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${s[24]}`)},m(B,y){F(B,e,y),h(e,t),h(t,l),W(n,l,null),h(t,o),h(t,r),W(a,r,null),h(e,i),h(e,c),h(c,g),h(e,d),h(e,_),h(_,v),h(_,k),h(_,m),h(e,D),S=!0,T||(z=[Ge(l,"click",R),Ge(r,"click",Y)],T=!0)},p(B,y){s=B,(!S||y&2)&&Me(l,"text-blue-500",s[21].label===!0),(!S||y&2)&&Me(r,"text-red-500",s[21].label===!1),(!S||y&2)&&f!==(f=s[21].text+"")&&se(g,f),(!S||y&2)&&b!==(b=s[25]+"")&&se(v,b),(!S||y&2)&&p!==(p=De(s[21].score,2)+"")&&se(m,p),(!S||y&2&&E!==(E=`flex flex-grow items-center whitespace-break-spaces rounded-md border border-gray-300 p-4 pl-2 ${s[24]}`))&&$(e,"class",E)},i(B){S||(V(n.$$.fragment,B),V(a.$$.fragment,B),S=!0)},o(B){M(n.$$.fragment,B),M(a.$$.fragment,B),S=!1},d(B){B&&u(e),j(n),j(a),T=!1,Vt(z)}}}function Nl(s){let e,t;return e=new Mt({props:{paragraph:!0,lines:2}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:K,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function ht(s){let e,t,l,n,o;const r=[Nl,Pl],a=[];function i(f,g){return g&3&&(e=null),e==null&&(e=!!(f[21]==null||f[0].includes(f[21].rowid))),e?0:1}function c(f,g){return g===1?Rl(f):f}return t=i(s,-1),l=a[t]=r[t](c(s,t)),{c(){l.c(),n=Le()},l(f){l.l(f),n=Le()},m(f,g){a[t].m(f,g),F(f,n,g),o=!0},p(f,g){let d=t;t=i(f,g),t===d?a[t].p(c(f,t),g):(oe(),M(a[d],1,1,()=>{a[d]=null}),ce(),l=a[t],l?l.p(c(f,t),g):(l=a[t]=r[t](c(f,t)),l.c()),V(l,1),l.m(n.parentNode,n))},i(f){o||(V(l),o=!0)},o(f){M(l),o=!1},d(f){a[t].d(f),f&&u(n)}}}function Bl(s){let e,t,l=s[1],n=[];for(let r=0;r<l.length;r+=1)n[r]=ht(mt(s,l,r));const o=r=>M(n[r],1,1,()=>{n[r]=null});return{c(){e=C("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var a=w(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(u),this.h()},h(){$(e,"class","flex flex-col gap-y-4")},m(r,a){F(r,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,[a]){if(a&35){l=r[1];let i;for(i=0;i<l.length;i+=1){const c=mt(r,l,i);n[i]?(n[i].p(c,a),V(n[i],1)):(n[i]=ht(c),n[i].c(),V(n[i],1),n[i].m(e,null))}for(oe(),i=l.length;i<n.length;i+=1)o(i);ce()}},i(r){if(!t){for(let a=0;a<l.length;a+=1)V(n[a]);t=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)M(n[a]);t=!1},d(r){r&&u(e),Ue(n,r)}}}const _t=100;function Fl(s){return s<.2?"bg-red-500/10":s<.8?"bg-yellow-500/10":"bg-blue-500/10"}function Hl(s){return s<.2?"Likely not in concept":s<.8?"Uncertain":"Likely in concept"}function Ol(s,e,t){let l,n,o,r,a,i,c,f,g=K,d=()=>(g(),g=Pe(a,A=>t(16,f=A)),a),_,b=K,v=()=>(b(),b=Pe(n,A=>t(17,_=A)),n);s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>b());let{dataset:k}=e,{concept:p}=e,{fieldPath:m}=e,{schema:D}=e,{embedding:E}=e;const S=Tt();Ce(s,S,A=>t(20,c=A));let T={},z={},R=[];function Y(A,X){if(A==null)return;const H={text:A.text,label:X},x=Object.keys(z).find(te=>z[te]===A);t(11,T={...z}),t(0,R=[A.rowid,...R]),c.mutate([p.namespace,p.concept_name,{insert:[H]}],{onSuccess:()=>{t(11,T={...T,[x]:void 0})},onSettled:()=>{t(0,R=R.filter(te=>te!==A.rowid))}})}const B=A=>Y(A,!0),y=A=>Y(A,!1);return s.$$set=A=>{"dataset"in A&&t(6,k=A.dataset),"concept"in A&&t(7,p=A.concept),"fieldPath"in A&&t(8,m=A.fieldPath),"schema"in A&&t(9,D=A.schema),"embedding"in A&&t(10,E=A.embedding)},s.$$.update=()=>{var A,X;s.$$.dirty&1408&&t(15,l={path:m,type:"concept",concept_namespace:p.namespace,concept_name:p.concept_name,embedding:E}),s.$$.dirty&33600&&v(t(3,n=et(k.namespace,k.name,{columns:[He,m],limit:_t,combine_columns:!0,searches:[l]},D))),s.$$.dirty&1152&&t(14,o={signal_name:"concept_score",namespace:p.namespace,concept_name:p.concept_name,embedding:E}),s.$$.dirty&128&&t(13,r={signal_name:"concept_labels",namespace:p.namespace,concept_name:p.concept_name}),s.$$.dirty&25408&&d(t(2,a=et(k.namespace,k.name,{columns:[He,m,{path:m,signal_udf:o},{path:m,signal_udf:r}],limit:_t,combine_columns:!0,sort_by:[He]},D))),s.$$.dirty&200064&&t(12,z=zl(T,_.isFetching||(A=_.data)==null?void 0:A.rows,f.isFetching||(X=f.data)==null?void 0:X.rows,p,m,E)),s.$$.dirty&4096&&t(1,i=[z.positive,z.neutral,z.negative])},[R,i,a,n,S,Y,k,p,m,D,E,T,z,r,o,l,f,_,B,y]}class Ll extends ve{constructor(e){super(),we(this,e,Ol,Bl,ke,{dataset:6,concept:7,fieldPath:8,schema:9,embedding:10})}}function pt(s){let e,t;return e=new Qe({props:{class:"dataset-link top-7 h-8",icon:Gt,iconDescription:"Open dataset and apply concept."}}),e.$on("click",s[7]),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:K,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function gt(s){let e,t,l;return t=new Ll({props:{concept:s[0],dataset:s[1],fieldPath:s[3],schema:s[2],embedding:s[4]}}),{c(){e=C("div"),q(t.$$.fragment)},l(n){e=I(n,"DIV",{});var o=w(e);U(t.$$.fragment,o),o.forEach(u)},m(n,o){F(n,e,o),W(t,e,null),l=!0},p(n,o){const r={};o&1&&(r.concept=n[0]),o&2&&(r.dataset=n[1]),o&8&&(r.fieldPath=n[3]),o&4&&(r.schema=n[2]),o&16&&(r.embedding=n[4]),t.$set(r)},i(n){l||(V(t.$$.fragment,n),l=!0)},o(n){M(t.$$.fragment,n),l=!1},d(n){n&&u(e),j(t)}}}function bt(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"No embeddings",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before using the labeler on this dataset."}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Zl(s){let e,t,l,n,o,r,a,i,c,f,g;function d(D){s[9](D)}function _(D){s[10](D)}function b(D){s[11](D)}let v={};s[1]!==void 0&&(v.dataset=s[1]),s[3]!==void 0&&(v.path=s[3]),s[4]!==void 0&&(v.embedding=s[4]),n=new Pt({props:v}),Te.push(()=>Ae(n,"dataset",d)),Te.push(()=>Ae(n,"path",_)),Te.push(()=>Ae(n,"embedding",b));let k=s[3]!=null&&s[4]!=null&&pt(s),p=s[1]!=null&&s[3]!=null&&s[2]!=null&&s[4]!=null&&gt(s),m=s[4]==null&&bt();return{c(){e=C("div"),t=C("div"),l=C("div"),q(n.$$.fragment),i=Q(),k&&k.c(),c=Q(),p&&p.c(),f=Q(),m&&m.c(),this.h()},l(D){e=I(D,"DIV",{class:!0});var E=w(e);t=I(E,"DIV",{class:!0});var S=w(t);l=I(S,"DIV",{class:!0});var T=w(l);U(n.$$.fragment,T),T.forEach(u),i=G(S),k&&k.l(S),S.forEach(u),c=G(E),p&&p.l(E),f=G(E),m&&m.l(E),E.forEach(u),this.h()},h(){$(l,"class","flex-grow"),$(t,"class","flex flex-row gap-x-4"),$(e,"class","flex flex-col gap-y-4")},m(D,E){F(D,e,E),h(e,t),h(t,l),W(n,l,null),h(t,i),k&&k.m(t,null),h(e,c),p&&p.m(e,null),h(e,f),m&&m.m(e,null),g=!0},p(D,[E]){const S={};!o&&E&2&&(o=!0,S.dataset=D[1],Se(()=>o=!1)),!r&&E&8&&(r=!0,S.path=D[3],Se(()=>r=!1)),!a&&E&16&&(a=!0,S.embedding=D[4],Se(()=>a=!1)),n.$set(S),D[3]!=null&&D[4]!=null?k?(k.p(D,E),E&24&&V(k,1)):(k=pt(D),k.c(),V(k,1),k.m(t,null)):k&&(oe(),M(k,1,1,()=>{k=null}),ce()),D[1]!=null&&D[3]!=null&&D[2]!=null&&D[4]!=null?p?(p.p(D,E),E&30&&V(p,1)):(p=gt(D),p.c(),V(p,1),p.m(e,f)):p&&(oe(),M(p,1,1,()=>{p=null}),ce()),D[4]==null?m?E&16&&V(m,1):(m=bt(),m.c(),V(m,1),m.m(e,null)):m&&(oe(),M(m,1,1,()=>{m=null}),ce())},i(D){g||(V(n.$$.fragment,D),V(k),V(p),V(m),g=!0)},o(D){M(n.$$.fragment,D),M(k),M(p),M(m),g=!1},d(D){D&&u(e),j(n),k&&k.d(),p&&p.d(),m&&m.d()}}}function Yl(s,e,t){let l,n,o,r=K,a=()=>(r(),r=Pe(l,m=>t(8,o=m)),l);s.$$.on_destroy.push(()=>r());let{concept:i}=e,c,f,g,d;const _=At();Ce(s,_,m=>t(12,n=m));function b(){if(g==null||d==null||c==null)return;const m=St(c.namespace,c.name);m.addSearch({path:g,type:"concept",concept_namespace:i.namespace,concept_name:i.concept_name,embedding:d}),Ct(yt(c.namespace,c.name,n,Dt(m)))}function v(m){c=m,t(1,c)}function k(m){g=m,t(3,g)}function p(m){d=m,t(4,d)}return s.$$set=m=>{"concept"in m&&t(0,i=m.concept)},s.$$.update=()=>{s.$$.dirty&2&&a(t(5,l=c!=null&&c.namespace&&(c!=null&&c.name)?Kt(c.namespace,c.name):null)),s.$$.dirty&256&&t(2,f=o==null?void 0:o.data)},[i,c,f,g,d,l,_,b,o,v,k,p]}class ql extends ve{constructor(e){super(),we(this,e,Yl,Zl,ke,{concept:0})}}function vt(s,e,t){var o;const l=s.slice();l[34]=e[t];const n=(o=l[11].data)==null?void 0:o.find(function(...a){return s[27](l[34],...a)});return l[35]=n,l}function Ul(s){let e,t,l,n,o;return t=new fl({props:{class:"ml-2"}}),{c(){e=C("div"),q(t.$$.fragment)},l(r){e=I(r,"DIV",{});var a=w(e);U(t.$$.fragment,a),a.forEach(u)},m(r,a){F(r,e,a),W(t,e,null),l=!0,n||(o=We(je.call(null,e,{text:"This concept is publicly visible."})),n=!0)},i(r){l||(V(t.$$.fragment,r),l=!0)},o(r){M(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t),n=!1,o()}}}function Wl(s){let e,t,l,n,o;return t=new ml({props:{class:"ml-2"}}),{c(){e=C("div"),q(t.$$.fragment)},l(r){e=I(r,"DIV",{});var a=w(e);U(t.$$.fragment,a),a.forEach(u)},m(r,a){F(r,e,a),W(t,e,null),l=!0,n||(o=We(je.call(null,e,{text:"Your concepts are only visible to you when logged in with Google."})),n=!0)},i(r){l||(V(t.$$.fragment,r),l=!0)},o(r){M(t.$$.fragment,r),l=!1},d(r){r&&u(e),j(t),n=!1,o()}}}function wt(s){let e,t=s[0].metadata.description+"",l;return{c(){e=C("div"),l=L(t),this.h()},l(n){e=I(n,"DIV",{class:!0});var o=w(e);l=Z(o,t),o.forEach(u),this.h()},h(){$(e,"class","text text-base text-gray-600")},m(n,o){F(n,e,o),h(e,l)},p(n,o){o[0]&1&&t!==(t=n[0].metadata.description+"")&&se(l,t)},d(n){n&&u(e)}}}function jl(s){let e,t;return{c(){e=C("div"),t=L("Try it"),this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Try it"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:K,d(l){l&&u(e)}}}function Ql(s){let e,t;return{c(){e=C("div"),t=L("No examples to preview. Please add examples."),this.h()},l(l){e=I(l,"DIV",{class:!0});var n=w(e);t=Z(n,"No examples to preview. Please add examples."),n.forEach(u),this.h()},h(){$(e,"class","text-gray-600")},m(l,n){F(l,e,n),h(e,t)},p:K,i:K,o:K,d(l){l&&u(e)}}}function Gl(s){let e,t;return e=new yl({props:{example:s[6],concept:s[0]}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const o={};n[0]&64&&(o.example=l[6]),n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Kl(s){let e,t,l,n;const o=[Gl,Ql],r=[];function a(i,c){return i[6]?0:1}return t=a(s),l=r[t]=o[t](s),{c(){e=C("div"),l.c(),this.h()},l(i){e=I(i,"DIV",{slot:!0});var c=w(e);l.l(c),c.forEach(u),this.h()},h(){$(e,"slot","below")},m(i,c){F(i,e,c),r[t].m(e,null),n=!0},p(i,c){let f=t;t=a(i),t===f?r[t].p(i,c):(oe(),M(r[f],1,1,()=>{r[f]=null}),ce(),l=r[t],l?l.p(i,c):(l=r[t]=o[t](i),l.c()),V(l,1),l.m(e,null))},i(i){n||(V(l),n=!0)},o(i){M(l),n=!1},d(i){i&&u(e),r[t].d()}}}function Jl(s){let e,t;return{c(){e=C("div"),t=L("Apply to a dataset"),this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Apply to a dataset"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:K,d(l){l&&u(e)}}}function Xl(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Choose a dataset with a computed embedding",caption:"Dataset has no fields with computed embeddings. Please compute an embedding index before you can search by concept."}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:K,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function xl(s){let e,t,l;return t=new Qe({props:{iconDescription:"Open dataset and apply concept.",$$slots:{default:[en]},$$scope:{ctx:s}}}),t.$on("click",s[26]),{c(){e=C("div"),q(t.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var o=w(e);U(t.$$.fragment,o),o.forEach(u),this.h()},h(){$(e,"class","mt-4")},m(n,o){F(n,e,o),W(t,e,null),l=!0},p(n,o){const r={};o[1]&128&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){l||(V(t.$$.fragment,n),l=!0)},o(n){M(t.$$.fragment,n),l=!1},d(n){n&&u(e),j(t)}}}function en(s){let e;return{c(){e=L("Search by concept")},l(t){e=Z(t,"Search by concept")},m(t,l){F(t,e,l)},d(t){t&&u(e)}}}function tn(s){let e,t,l,n,o,r,a,i,c;function f(p){s[23](p)}function g(p){s[24](p)}function d(p){s[25](p)}let _={};s[2]!==void 0&&(_.dataset=s[2]),s[3]!==void 0&&(_.path=s[3]),s[4]!==void 0&&(_.embedding=s[4]),t=new Pt({props:_}),Te.push(()=>Ae(t,"dataset",f)),Te.push(()=>Ae(t,"path",g)),Te.push(()=>Ae(t,"embedding",d));const b=[xl,Xl],v=[];function k(p,m){return p[2]!=null&&p[3]!=null&&p[4]!=null?0:1}return a=k(s),i=v[a]=b[a](s),{c(){e=C("div"),q(t.$$.fragment),r=Q(),i.c(),this.h()},l(p){e=I(p,"DIV",{slot:!0});var m=w(e);U(t.$$.fragment,m),r=G(m),i.l(m),m.forEach(u),this.h()},h(){$(e,"slot","below")},m(p,m){F(p,e,m),W(t,e,null),h(e,r),v[a].m(e,null),c=!0},p(p,m){const D={};!l&&m[0]&4&&(l=!0,D.dataset=p[2],Se(()=>l=!1)),!n&&m[0]&8&&(n=!0,D.path=p[3],Se(()=>n=!1)),!o&&m[0]&16&&(o=!0,D.embedding=p[4],Se(()=>o=!1)),t.$set(D);let E=a;a=k(p),a===E?v[a].p(p,m):(oe(),M(v[E],1,1,()=>{v[E]=null}),ce(),i=v[a],i?i.p(p,m):(i=v[a]=b[a](p),i.c()),V(i,1),i.m(e,null))},i(p){c||(V(t.$$.fragment,p),V(i),c=!0)},o(p){M(t.$$.fragment,p),M(i),c=!1},d(p){p&&u(e),j(t),v[a].d()}}}function ln(s){let e,t;return{c(){e=C("div"),t=L("Collect labels"),this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Collect labels"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:K,d(l){l&&u(e)}}}function nn(s){let e,t;return e=new Xe({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"You don't have permission to edit this concept",caption:"You can only edit concepts you created."}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:K,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function sn(s){let e,t;return e=new ql({props:{concept:s[0]}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),e.$set(o)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function an(s){let e,t,l,n;const o=[sn,nn],r=[];function a(i,c){return i[8]?0:1}return t=a(s),l=r[t]=o[t](s),{c(){e=C("div"),l.c(),this.h()},l(i){e=I(i,"DIV",{slot:!0,class:!0});var c=w(e);l.l(c),c.forEach(u),this.h()},h(){$(e,"slot","below"),$(e,"class","w-full")},m(i,c){F(i,e,c),r[t].m(e,null),n=!0},p(i,c){let f=t;t=a(i),t===f?r[t].p(i,c):(oe(),M(r[f],1,1,()=>{r[f]=null}),ce(),l=r[t],l?l.p(i,c):(l=r[t]=o[t](i),l.c()),V(l,1),l.m(e,null))},i(i){n||(V(l),n=!0)},o(i){M(l),n=!1},d(i){i&&u(e),r[t].d()}}}function kt(s){let e,t;return e=new Oe({props:{expanded:!0,$$slots:{below:[on],above:[rn]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const o={};n[0]&3073|n[1]&128&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function rn(s){let e,t;return{c(){e=C("div"),t=L("Metrics"),this.h()},l(l){e=I(l,"DIV",{slot:!0,class:!0});var n=w(e);t=Z(n,"Metrics"),n.forEach(u),this.h()},h(){$(e,"slot","above"),$(e,"class","text-md font-semibold")},m(l,n){F(l,e,n),h(e,t)},p:K,d(l){l&&u(e)}}}function Et(s){let e,t;return e=new Dl({props:{concept:s[0],embedding:s[34].name,model:s[35],isFetching:s[11].isFetching}}),{c(){q(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const o={};n[0]&1&&(o.concept=l[0]),n[0]&1024&&(o.embedding=l[34].name),n[0]&3072&&(o.model=l[35]),n[0]&2048&&(o.isFetching=l[11].isFetching),e.$set(o)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function on(s){let e,t,l=s[10].data,n=[];for(let r=0;r<l.length;r+=1)n[r]=Et(vt(s,l,r));const o=r=>M(n[r],1,1,()=>{n[r]=null});return{c(){e=C("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=I(r,"DIV",{slot:!0,class:!0});var a=w(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(u),this.h()},h(){$(e,"slot","below"),$(e,"class","model-metrics flex flex-wrap gap-x-4 gap-y-4")},m(r,a){F(r,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(r,a){if(a[0]&3073){l=r[10].data;let i;for(i=0;i<l.length;i+=1){const c=vt(r,l,i);n[i]?(n[i].p(c,a),V(n[i],1)):(n[i]=Et(c),n[i].c(),V(n[i],1),n[i].m(e,null))}for(oe(),i=l.length;i<n.length;i+=1)o(i);ce()}},i(r){if(!t){for(let a=0;a<l.length;a+=1)V(n[a]);t=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)M(n[a]);t=!1},d(r){r&&u(e),Ue(n,r)}}}function cn(s){var Ne;let e,t,l,n=s[0].concept_name+"",o,r,a,i,c,f,g,d,_,b,v,k,p,m,D,E,S,T,z=s[1].length+"",R,Y,B,y,A,X,H,x,te,_e=s[7].length+"",de,pe,Ee,le,J;const N=[Wl,Ul],ae=[];function Ie(P,O){var fe,ue;return P[9]==P[0].namespace&&!((fe=P[0].metadata)!=null&&fe.is_public)?0:(ue=P[0].metadata)!=null&&ue.is_public?1:-1}~(a=Ie(s))&&(i=ae[a]=N[a](s));let ee=((Ne=s[0].metadata)==null?void 0:Ne.description)&&wt(s);g=new Oe({props:{expanded:!0,$$slots:{below:[Kl],above:[jl]},$$scope:{ctx:s}}}),_=new Oe({props:{$$slots:{below:[tn],above:[Jl]},$$scope:{ctx:s}}}),v=new Oe({props:{$$slots:{below:[an],above:[ln]},$$scope:{ctx:s}}});let ne=s[10].data&&kt(s);return S=new zt({}),y=new ct({props:{data:s[1],canEditConcept:s[8]}}),y.$on("remove",s[28]),y.$on("add",s[29]),x=new Rt({}),le=new ct({props:{data:s[7],canEditConcept:s[8]}}),le.$on("remove",s[30]),le.$on("add",s[31]),{c(){e=C("div"),t=C("div"),l=C("div"),o=L(n),r=Q(),i&&i.c(),c=Q(),ee&&ee.c(),f=Q(),q(g.$$.fragment),d=Q(),q(_.$$.fragment),b=Q(),q(v.$$.fragment),k=Q(),ne&&ne.c(),p=Q(),m=C("div"),D=C("div"),E=C("span"),q(S.$$.fragment),T=L(" In concept ("),R=L(z),Y=L(" examples)"),B=Q(),q(y.$$.fragment),A=Q(),X=C("div"),H=C("span"),q(x.$$.fragment),te=L("Not in concept ("),de=L(_e),pe=L(" examples)"),Ee=Q(),q(le.$$.fragment),this.h()},l(P){e=I(P,"DIV",{class:!0});var O=w(e);t=I(O,"DIV",{});var fe=w(t);l=I(fe,"DIV",{class:!0});var ue=w(l);o=Z(ue,n),r=G(ue),i&&i.l(ue),ue.forEach(u),c=G(fe),ee&&ee.l(fe),fe.forEach(u),f=G(O),U(g.$$.fragment,O),d=G(O),U(_.$$.fragment,O),b=G(O),U(v.$$.fragment,O),k=G(O),ne&&ne.l(O),p=G(O),m=I(O,"DIV",{class:!0});var $e=w(m);D=I($e,"DIV",{class:!0});var Ve=w(D);E=I(Ve,"SPAN",{class:!0});var me=w(E);U(S.$$.fragment,me),T=Z(me," In concept ("),R=Z(me,z),Y=Z(me," examples)"),me.forEach(u),B=G(Ve),U(y.$$.fragment,Ve),Ve.forEach(u),A=G($e),X=I($e,"DIV",{class:!0});var ge=w(X);H=I(ge,"SPAN",{class:!0});var be=w(H);U(x.$$.fragment,be),te=Z(be,"Not in concept ("),de=Z(be,_e),pe=Z(be," examples)"),be.forEach(u),Ee=G(ge),U(le.$$.fragment,ge),ge.forEach(u),$e.forEach(u),O.forEach(u),this.h()},h(){$(l,"class","flex flex-row items-center text-2xl font-semibold"),$(E,"class","flex items-center gap-x-2 text-lg"),$(D,"class","flex w-0 flex-grow flex-col gap-y-4"),$(H,"class","flex items-center gap-x-2 text-lg"),$(X,"class","flex w-0 flex-grow flex-col gap-y-4"),$(m,"class","flex gap-x-4"),$(e,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(P,O){F(P,e,O),h(e,t),h(t,l),h(l,o),h(l,r),~a&&ae[a].m(l,null),h(t,c),ee&&ee.m(t,null),h(e,f),W(g,e,null),h(e,d),W(_,e,null),h(e,b),W(v,e,null),h(e,k),ne&&ne.m(e,null),h(e,p),h(e,m),h(m,D),h(D,E),W(S,E,null),h(E,T),h(E,R),h(E,Y),h(D,B),W(y,D,null),h(m,A),h(m,X),h(X,H),W(x,H,null),h(H,te),h(H,de),h(H,pe),h(X,Ee),W(le,X,null),J=!0},p(P,O){var be;(!J||O[0]&1)&&n!==(n=P[0].concept_name+"")&&se(o,n);let fe=a;a=Ie(P),a!==fe&&(i&&(oe(),M(ae[fe],1,1,()=>{ae[fe]=null}),ce()),~a?(i=ae[a],i||(i=ae[a]=N[a](P),i.c()),V(i,1),i.m(l,null)):i=null),(be=P[0].metadata)!=null&&be.description?ee?ee.p(P,O):(ee=wt(P),ee.c(),ee.m(t,null)):ee&&(ee.d(1),ee=null);const ue={};O[0]&65|O[1]&128&&(ue.$$scope={dirty:O,ctx:P}),g.$set(ue);const $e={};O[0]&28|O[1]&128&&($e.$$scope={dirty:O,ctx:P}),_.$set($e);const Ve={};O[0]&257|O[1]&128&&(Ve.$$scope={dirty:O,ctx:P}),v.$set(Ve),P[10].data?ne?(ne.p(P,O),O[0]&1024&&V(ne,1)):(ne=kt(P),ne.c(),V(ne,1),ne.m(e,p)):ne&&(oe(),M(ne,1,1,()=>{ne=null}),ce()),(!J||O[0]&2)&&z!==(z=P[1].length+"")&&se(R,z);const me={};O[0]&2&&(me.data=P[1]),O[0]&256&&(me.canEditConcept=P[8]),y.$set(me),(!J||O[0]&128)&&_e!==(_e=P[7].length+"")&&se(de,_e);const ge={};O[0]&128&&(ge.data=P[7]),O[0]&256&&(ge.canEditConcept=P[8]),le.$set(ge)},i(P){J||(V(i),V(g.$$.fragment,P),V(_.$$.fragment,P),V(v.$$.fragment,P),V(ne),V(S.$$.fragment,P),V(y.$$.fragment,P),V(x.$$.fragment,P),V(le.$$.fragment,P),J=!0)},o(P){M(i),M(g.$$.fragment,P),M(_.$$.fragment,P),M(v.$$.fragment,P),M(ne),M(S.$$.fragment,P),M(y.$$.fragment,P),M(x.$$.fragment,P),M(le.$$.fragment,P),J=!1},d(P){P&&u(e),~a&&ae[a].d(),ee&&ee.d(),j(g),j(_),j(v),ne&&ne.d(),j(S),j(y),j(x),j(le)}}}function fn(s,e,t){let l,n,o,r,a,i,c,f,g,d,_,b,v,k=K,p=()=>(k(),k=Pe(c,N=>t(11,v=N)),c);s.$$.on_destroy.push(()=>k());let{concept:m}=e;const D=Jt();Ce(s,D,N=>t(22,_=N));const E=Xt();Ce(s,E,N=>t(21,d=N));const S=At();Ce(s,S,N=>t(33,g=N));const T=Tt();Ce(s,T,N=>t(32,f=N));const z=It();Ce(s,z,N=>t(10,b=N));let R,Y,B;function y(){if(Y==null||B==null||R==null)return;const N=St(R.namespace,R.name);N.addSearch({path:Y,type:"concept",concept_namespace:m.namespace,concept_name:m.concept_name,embedding:B}),Ct(yt(R.namespace,R.name,g,Dt(N)))}function A(N){!m.namespace||!m.concept_name||f.mutate([m.namespace,m.concept_name,{remove:[N]}])}function X(N,ae){!m.namespace||!m.concept_name||f.mutate([m.namespace,m.concept_name,{insert:[{text:N,label:ae}]}])}function H(N){R=N,t(2,R)}function x(N){Y=N,t(3,Y)}function te(N){B=N,t(4,B)}const _e=()=>y(),de=(N,ae)=>ae.embedding_name==N.name,pe=N=>A(N.detail),Ee=N=>X(N.detail,!0),le=N=>A(N.detail),J=N=>X(N.detail,!1);return s.$$set=N=>{"concept"in N&&t(0,m=N.concept)},s.$$.update=()=>{var N,ae,Ie;s.$$.dirty[0]&4194304&&t(9,l=(ae=(N=_.data)==null?void 0:N.user)==null?void 0:ae.id),s.$$.dirty[0]&2097153&&t(20,n=(Ie=d.data)==null?void 0:Ie.find(ee=>ee.namespace===m.namespace&&ee.name===m.concept_name)),s.$$.dirty[0]&1048576&&t(8,o=(n==null?void 0:n.acls.write)==!0),s.$$.dirty[0]&1&&t(1,r=Object.values(m.data).filter(ee=>ee.label==!0)),s.$$.dirty[0]&1&&t(7,a=Object.values(m.data).filter(ee=>ee.label==!1)),s.$$.dirty[0]&2&&t(6,i=r[Math.floor(Math.random()*r.length)]),s.$$.dirty[0]&1&&p(t(5,c=xt(m.namespace,m.concept_name)))},[m,r,R,Y,B,c,i,a,o,l,b,v,D,E,S,T,z,y,A,X,n,d,_,H,x,te,_e,de,pe,Ee,le,J]}class kn extends ve{constructor(e){super(),we(this,e,fn,cn,ke,{concept:0},null,[-1,-1])}}export{kn as C,wn as S,ml as V,fl as a,nt as b};
