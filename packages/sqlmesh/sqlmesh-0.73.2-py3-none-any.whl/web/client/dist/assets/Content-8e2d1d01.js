import{a as j,n as F,r as P,M as L,j as e,P as S,t as Q,o as p,k as T,p as z,q as O,s as R,v as A,h as I,c as q,b as g,i as u,f as B,N as k,g as y,w as H}from"./index-a034c31a.js";import{M as $,u as _,L as G,C as U,a as D,b as V}from"./ModelLineage-281f0bc5.js";import{v as N,M as J,P as K,S as C}from"./_commonjs-dynamic-modules-c2a76892.js";import{r as h,T as W}from"./Tab-dc5fdab3.js";const b=function({model:s,withModel:n=!0,withDescription:i=!0,withColumns:c=!0,withCode:f=!0,withQuery:m=!0}){const t=j(r=>r.setLastSelectedModel),{refetch:d,cancel:o}=F(s.name);return P.useEffect(()=>(d().then(({data:r})=>{s.update(r),t(new L(s))}),()=>{o()}),[s.name]),e.jsxs(v,{children:[n&&e.jsx(w,{headline:"Model",defaultOpen:!0,children:e.jsxs("ul",{className:"w-full",children:[e.jsx(x,{name:"Path",value:s.path.split(S).slice(0,-1).join(S)}),e.jsx(x,{name:"Name",title:s.displayName,value:Q(s.displayName,50,25)}),e.jsx(x,{name:"Dialect",value:s.dialect}),e.jsx(x,{name:"Type",value:s.type}),Object.entries(s.details??{}).map(([r,l])=>e.jsx(x,{name:r.replaceAll("_"," "),value:l,isCapitalize:!0},r))]})}),i&&e.jsx(w,{headline:"Description",defaultOpen:!0,children:s.description??"No description"}),c&&e.jsx(w,{headline:"Columns",defaultOpen:!0,children:e.jsx($,{className:"max-h-[15rem]",nodeId:s.name,columns:s.columns,disabled:s.isModelPython,withHandles:!1,withSource:!1,withDescription:!0,limit:10})})]})};function X({headline:a}){return e.jsx("div",{className:"text-md font-bold whitespace-nowrap w-full",id:a,children:e.jsx("h3",{className:"py-2",children:a})})}function Y(){return e.jsx(v,{className:"font-bold whitespace-nowrap w-full h-full",children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function v({children:a,className:s}){return e.jsx("div",{className:p("w-full h-full rounded-xl",s),children:e.jsx("div",{className:"w-full h-full rounded-xl",children:e.jsx("div",{className:"w-full h-full overflow-scroll scrollbar scrollbar--vertical scrollbar--horizontal",children:a})})})}function w({children:a,className:s,headline:n,defaultOpen:i=!1}){return e.jsx("div",{className:"px-1 text-neutral-500 dark:text-neutral-400",children:e.jsx(N,{defaultOpen:i,children:({open:c})=>e.jsxs(e.Fragment,{children:[e.jsxs(N.Button,{className:p("flex items-center justify-between rounded-lg text-left w-full hover:bg-neutral-5 px-3 mb-1 overflow-hidden",s),children:[e.jsx(X,{headline:n}),e.jsx("div",{children:c?e.jsx(J,{className:"w-4 text-neutral-50"}):e.jsx(K,{className:"w-4 text-neutral-50"})})]}),e.jsx(N.Panel,{className:"pb-2 px-2 overflow-hidden",children:e.jsx("div",{className:"px-2 mb-2 text-xs",children:a})})]})})})}function x({className:a,name:s,value:n,isHighlighted:i=!1,isCapitalize:c=!1,children:f,title:m}){return e.jsxs("li",{className:p("w-full border-b last:border-b-0 border-neutral-10 py-1 mb-1 text-neutral-500 dark:text-neutral-400",a),children:[T(n)?e.jsxs(e.Fragment,{children:[e.jsx("strong",{title:m,className:"mr-2 text-xs capitalize",children:s}),n.map((t,d)=>e.jsx("ul",{className:"w-full flex flex-col whitespace-nowrap p-1 m-1 rounded-md overflow-hidden",children:Object.entries(t).map(([o,r])=>e.jsxs("li",{className:"flex items-center justify-between text-xs border-b border-neutral-10 last:border-b-0 py-1",children:[e.jsxs("strong",{className:"mr-2",children:[o,":"]}),e.jsx("p",{className:"text-xs",children:E(r)})]},o))},d))]}):e.jsxs("div",{className:"flex justify-between text-xs whitespace-nowrap",children:[e.jsx("strong",{className:p("mr-2",c&&"capitalize",i&&"text-brand-500"),children:s}),e.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:E(n)})]}),e.jsx("p",{className:"text-xs ",children:f})]})}b.NotFound=Y;b.Container=v;const Z=b;function E(a){const s=new Date(a),n=z(a)&&!isNaN(s.getTime()),i=typeof a=="boolean";return i&&O(a)?"True":i&&R(a)?"False":n?A(s):String(a)}function ae(){const{modelName:a}=I(),s=q(),n=j(l=>l.models),i=j(l=>l.lastSelectedModel),c=j(l=>l.setLastSelectedModel),f=g(l=>l.files),m=g(l=>l.setSelectedFile),t=u(a)?i:n.get(encodeURI(a));P.useEffect(()=>{if(B(t)){const l=f.get(t.path);if(u(l))return;m(l)}c(t)},[t,t==null?void 0:t.sql]);const d=u(t)?[]:_(t.path,l=>{o==null||o(l.name)});function o(l){const M=n.get(l);u(M)||s(y.DocsModels+"/"+M.name)}function r(l){console.log(l==null?void 0:l.message)}return e.jsx("div",{className:"flex overflow-auto w-full h-full",children:u(t)?e.jsx(k,{link:y.Docs,description:u(a)?void 0:`Model ${a} Does Not Exist`,message:"Back To Docs"}):e.jsx(G,{showColumns:!0,handleClickModel:o,handleError:r,children:e.jsxs(C,{className:"flex h-full w-full",sizes:[65,35],minSize:0,snapOffset:0,children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs(C,{direction:"vertical",sizes:[50,50],minSize:0,snapOffset:0,className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(U,{path:t.path,children:({file:l})=>e.jsxs(h.Group,{children:[e.jsx(W,{list:["Source Code",t.isModelSQL&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),e.jsxs(h.Panels,{className:"h-full w-full overflow-hidden text-xs",children:[e.jsx(h.Panel,{unmount:!1,className:"w-full h-full",children:e.jsx(D,{content:l.content,type:l.extension,extensions:d})}),t.isModelSQL&&e.jsx(h.Panel,{className:"w-full h-full",children:e.jsx(D,{type:H.SQL,content:t.sql??"",extensions:d})})]})]})},t.path)}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(V,{model:t})})]})}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(Z,{model:t,withQuery:t.isModelSQL})})]})})})}export{ae as default};
