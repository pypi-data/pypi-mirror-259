export const id=58993;export const ids=[58993,14804,95964];export const modules={28968:(t,e,i)=>{function a(t){return void 0===t||Array.isArray(t)?t:[t]}i.d(e,{C:()=>a})},65398:(t,e,i)=>{i.d(e,{cx:()=>s,mQ:()=>n});const a=["#3373D9","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function s(t){return a[t%a.length]}function n(t,e){return e.getPropertyValue(`--graph-color-${t+1}`)||s(t)}},59216:(t,e,i)=>{i.d(e,{Q:()=>c,o:()=>r});var a=i(62412),s=i(53616),n=i(93408);const o=(t,e,i,n)=>{const o=i((0,a.c)(t,e),n);return o instanceof Date?(0,s.c)(o,e):o},r=(t,e,i,a,s)=>i.time_zone===n.KU.server?o(t,a.time_zone,e,s):e(t,s),c=(t,e,i,a,s)=>i.time_zone===n.KU.server?o(t,a.time_zone,e,s):e(t,s)},6860:(t,e,i)=>{i.d(e,{A:()=>n,G:()=>s});var a=i(39296);const s={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},n=(t,e)=>(0,a.c)(parseFloat(t)*s[e])||"0"},5944:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{WS:()=>l,sB:()=>d});var s=i(8708),n=i(93408),o=i(14804),r=t([o]);o=(r.then?(await r)():r)[0];const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=t=>t.first_weekday===n.KO.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:(0,s.e)(t.language)%7:c.includes(t.first_weekday)?c.indexOf(t.first_weekday):1,l=t=>{const e=d(t);return c[e]};a()}catch(t){a(t)}}))},75192:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{Au:()=>g,Y3:()=>m,Yt:()=>b,_m:()=>u,gh:()=>v,iQ:()=>z,oI:()=>$,oR:()=>d,qy:()=>y,uO:()=>L});var s=i(72092),n=i(93408),o=i(14804),r=i(82796),c=t([o]);o=(c.then?(await c)():c)[0];const d=(t,e,i)=>l(e,i.time_zone).format(t),l=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,r.Y)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,r.Y)(t.time_zone,e)}))),m=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,r.Y)(t.time_zone,e)}))),y=(t,e,i)=>{var a,s,o,r;const c=f(e,i.time_zone);if(e.date_format===n.y8.language||e.date_format===n.y8.system)return c.format(t);const d=c.formatToParts(t),l=null===(a=d.find((t=>"literal"===t.type)))||void 0===a?void 0:a.value,u=null===(s=d.find((t=>"day"===t.type)))||void 0===s?void 0:s.value,h=null===(o=d.find((t=>"month"===t.type)))||void 0===o?void 0:o.value,m=null===(r=d.find((t=>"year"===t.type)))||void 0===r?void 0:r.value,_=d.at(d.length-1);let y="literal"===(null==_?void 0:_.type)?null==_?void 0:_.value:"";"bg"===e.language&&e.date_format===n.y8.YMD&&(y="");return{[n.y8.DMY]:`${u}${l}${h}${l}${m}${y}`,[n.y8.MDY]:`${h}${l}${u}${l}${m}${y}`,[n.y8.YMD]:`${m}${l}${h}${l}${u}${y}`}[e.date_format]},f=(0,s.c)(((t,e)=>{const i=t.date_format===n.y8.system?void 0:t.language;return t.date_format===n.y8.language||(t.date_format,n.y8.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,r.Y)(t.time_zone,e)})})),g=(t,e,i)=>p(e,i.time_zone).format(t),p=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:(0,r.Y)(t.time_zone,e)}))),v=(t,e,i)=>k(e,i.time_zone).format(t),k=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:(0,r.Y)(t.time_zone,e)}))),b=(t,e,i)=>w(e,i.time_zone).format(t),w=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",timeZone:(0,r.Y)(t.time_zone,e)}))),$=(t,e,i)=>D(e,i.time_zone).format(t),D=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:(0,r.Y)(t.time_zone,e)}))),z=(t,e,i)=>S(e,i.time_zone).format(t),S=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:(0,r.Y)(t.time_zone,e)}))),L=(t,e,i)=>H(e,i.time_zone).format(t),H=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:(0,r.Y)(t.time_zone,e)})));a()}catch(t){a(t)}}))},37304:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{QX:()=>y,Wi:()=>g,cb:()=>v,eY:()=>m,kZ:()=>u});var s=i(72092),n=i(14804),o=i(75192),r=i(98611),c=i(82796),d=i(8456),l=t([n,o,r]);[n,o,r]=l.then?(await l)():l;const u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.i)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.i)(t)?"h12":"h23",timeZone:(0,c.Y)(t.time_zone,e)}))),m=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,d.i)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.i)(t)?"h12":"h23",timeZone:(0,c.Y)(t.time_zone,e)}))),y=(t,e,i)=>f(e,i.time_zone).format(t),f=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,d.i)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.i)(t)?"h12":"h23",timeZone:(0,c.Y)(t.time_zone,e)}))),g=(t,e,i)=>p(e,i.time_zone).format(t),p=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.i)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,d.i)(t)?"h12":"h23",timeZone:(0,c.Y)(t.time_zone,e)}))),v=(t,e,i)=>`${(0,o.qy)(t,e,i)}, ${(0,r.AB)(t,e,i)}`;a()}catch(t){a(t)}}))},98611:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{AB:()=>d,AR:()=>u,O:()=>y,Yt:()=>m});var s=i(72092),n=i(14804),o=i(82796),r=i(8456),c=t([n]);n=(c.then?(await c)():c)[0];const d=(t,e,i)=>l(e,i.time_zone).format(t),l=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,r.i)(t)?"h12":"h23",timeZone:(0,o.Y)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:(0,r.i)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,r.i)(t)?"h12":"h23",timeZone:(0,o.Y)(t.time_zone,e)}))),m=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.c)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,r.i)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,r.i)(t)?"h12":"h23",timeZone:(0,o.Y)(t.time_zone,e)}))),y=(t,e,i)=>f(e,i.time_zone).format(t),f=(0,s.c)(((t,e)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,o.Y)(t.time_zone,e)})));a()}catch(t){a(t)}}))},39296:(t,e,i)=>{i.d(e,{c:()=>s});const a=(t,e=2)=>{let i=""+t;for(let t=1;t<e;t++)i=parseInt(i)<10**t?`0${i}`:i;return i};function s(t){const e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),s=Math.floor(t/1e3%3600%60),n=Math.floor(t%1e3);return e>0?`${e}:${a(i)}:${a(s)}`:i>0?`${i}:${a(s)}`:s>0||n>0?`${s}${n>0?`.${a(n,3)}`:""}`:null}},8456:(t,e,i)=>{i.d(e,{i:()=>n});var a=i(72092),s=i(93408);const n=(0,a.c)((t=>{if(t.time_format===s._g.language||t.time_format===s._g.system){const e=t.time_format===s._g.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===s._g.am_pm}))},93024:(t,e,i)=>{i.d(e,{_:()=>n});class a{constructor(t=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=t,t===window.localStorage&&window.addEventListener("storage",(t=>{t.key&&this.hasKey(t.key)&&(this._storage[t.key]=t.newValue?JSON.parse(t.newValue):t.newValue,this._listeners[t.key]&&this._listeners[t.key].forEach((e=>e(t.oldValue?JSON.parse(t.oldValue):t.oldValue,this._storage[t.key]))))}))}addFromStorage(t){if(!this._storage[t]){const e=this.storage.getItem(t);e&&(this._storage[t]=JSON.parse(e))}}subscribeChanges(t,e){return this._listeners[t]?this._listeners[t].push(e):this._listeners[t]=[e],()=>{this.unsubscribeChanges(t,e)}}unsubscribeChanges(t,e){if(!(t in this._listeners))return;const i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}hasKey(t){return t in this._storage}getValue(t){return this._storage[t]}setValue(t,e){const i=this._storage[t];this._storage[t]=e;try{void 0===e?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify(e))}catch(t){}finally{this._listeners[t]&&this._listeners[t].forEach((t=>t(i,e)))}}}const s={},n=t=>e=>{const i=t.storage||"localStorage";let n;i&&i in s?n=s[i]:(n=new a(window[i]),s[i]=n);const o=String(e.key),r=t.key||String(e.key),c=e.initializer?e.initializer():void 0;n.addFromStorage(r);const d=!1!==t.subscribe?t=>n.subscribeChanges(r,((i,a)=>{t.requestUpdate(e.key,i)})):void 0,l=()=>n.hasKey(r)?n.getValue(r):c;return{kind:"method",placement:"prototype",key:e.key,descriptor:{set(i){((i,a)=>{let s;t.state&&(s=l()),n.setValue(r,a),t.state&&i.requestUpdate(e.key,s)})(this,i)},get:()=>l(),enumerable:!0,configurable:!0},finisher(i){if(t.state&&t.subscribe){const t=i.prototype.connectedCallback,e=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){t.call(this),this[`__unbsubLocalStorage${o}`]=null==d?void 0:d(this)},i.prototype.disconnectedCallback=function(){var t;e.call(this),null===(t=this[`__unbsubLocalStorage${o}`])||void 0===t||t.call(this),this[`__unbsubLocalStorage${o}`]=void 0}}t.state&&i.createProperty(e.key,{noAccessor:!0,...t.stateOptions})}}}},67695:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.d(e,{G:()=>_,Y:()=>f,computeStateDisplay:()=>y});var s=i(38076),n=i(93408),o=i(6860),r=i(75192),c=i(37304),d=i(98611),l=i(6600),u=i(62036),h=i(85860),m=t([r,c,d]);[r,c,d]=m.then?(await m)():m;const _=(t,e,i,a,s,n)=>f(t,i,a,s,e.entity_id,e.attributes,void 0!==n?n:e.state),y=(t,e,i,a,s,n)=>{const o=null==s?void 0:s[e.entity_id];return f(t,i,a,o,e.entity_id,e.attributes,void 0!==n?n:e.state)},f=(t,e,i,a,m,_,y)=>{if(y===s.Eq||y===s.YV)return t(`state.default.${y}`);if((0,l.q_)(_)){if("duration"===_.device_class&&_.unit_of_measurement&&o.G[_.unit_of_measurement]&&void 0===(null==a?void 0:a.display_precision))try{return(0,o.A)(y,_.unit_of_measurement)}catch(t){}if("monetary"===_.device_class)try{return(0,l.iy)(y,e,{style:"currency",currency:_.unit_of_measurement,minimumFractionDigits:2,...(0,l.BN)({state:y,attributes:_},a)})}catch(t){}const t=(0,l.iy)(y,e,(0,l.BN)({state:y,attributes:_},a)),i=_.unit_of_measurement;return i?`${t}${(0,u.q)(i,e)}${i}`:t}const f=(0,h.o)(m);if("datetime"===f){const t=new Date(y);return(0,c.kZ)(t,e,i)}if(["date","input_datetime","time"].includes(f))try{const t=y.split(" ");if(2===t.length)return(0,c.kZ)(new Date(t.join("T")),{...e,time_zone:n.KU.local},i);if(1===t.length){if(y.includes("-"))return(0,r._m)(new Date(`${y}T00:00`),{...e,time_zone:n.KU.local},i);if(y.includes(":")){const t=new Date;return(0,d.AB)(new Date(`${t.toISOString().split("T")[0]}T${y}`),{...e,time_zone:n.KU.local},i)}}return y}catch(t){return y}if("counter"===f||"number"===f||"input_number"===f)return(0,l.iy)(y,e,(0,l.BN)({state:y,attributes:_},a));if(["button","event","image","input_button","scene","stt","tts","wake_word"].includes(f)||"sensor"===f&&"timestamp"===_.device_class)try{return(0,c.kZ)(new Date(y),e,i)}catch(t){return y}return(null==a?void 0:a.translation_key)&&t(`component.${a.platform}.entity.${f}.${a.translation_key}.state.${y}`)||_.device_class&&t(`component.${f}.entity_component.${_.device_class}.state.${y}`)||t(`component.${f}.entity_component._.state.${y}`)||y};a()}catch(t){a(t)}}))},80576:(t,e,i)=>{i.d(e,{S:()=>s});var a=i(85860);const s=t=>(0,a.o)(t.entity_id)},2324:(t,e,i)=>{i.d(e,{K:()=>a});const a=(t,e)=>s(t.attributes,e),s=(t,e)=>0!=(t.supported_features&e)},84176:(t,e,i)=>{i.d(e,{A:()=>s,q:()=>a});const a=(t,e,i)=>Math.min(Math.max(t,e),i),s=(t,e,i)=>{let a;return a=null!=e?Math.max(t,e):t,a=null!=i?Math.min(a,i):a,a}},6600:(t,e,i)=>{i.d(e,{BN:()=>d,gz:()=>r,iy:()=>c,q_:()=>o,ru:()=>n});var a=i(93408),s=i(63568);const n=t=>o(t.attributes),o=t=>!!t.unit_of_measurement||!!t.state_class,r=t=>{switch(t.number_format){case a.SA.comma_decimal:return["en-US","en"];case a.SA.decimal_comma:return["de","es","it"];case a.SA.space_comma:return["fr","sv","cs"];case a.SA.system:return;default:return t.language}},c=(t,e,i)=>{const n=e?r(e):void 0;if(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)!==a.SA.none&&!Number.isNaN(Number(t))&&Intl)try{return new Intl.NumberFormat(n,l(t,i)).format(Number(t))}catch(e){return console.error(e),new Intl.NumberFormat(void 0,l(t,i)).format(Number(t))}return!Number.isNaN(Number(t))&&""!==t&&(null==e?void 0:e.number_format)===a.SA.none&&Intl?new Intl.NumberFormat("en-US",l(t,{...i,useGrouping:!1})).format(Number(t)):"string"==typeof t?t:`${(0,s.k)(t,null==i?void 0:i.maximumFractionDigits).toString()}${"currency"===(null==i?void 0:i.style)?` ${i.currency}`:""}`},d=(t,e)=>{var i;const a=null==e?void 0:e.display_precision;return null!=a?{maximumFractionDigits:a,minimumFractionDigits:a}:Number.isInteger(Number(null==t||null===(i=t.attributes)||void 0===i?void 0:i.step))&&Number.isInteger(Number(null==t?void 0:t.state))?{maximumFractionDigits:0}:void 0},l=(t,e)=>{const i={maximumFractionDigits:2,...e};if("string"!=typeof t)return i;if(!e||void 0===e.minimumFractionDigits&&void 0===e.maximumFractionDigits){const e=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=e,i.maximumFractionDigits=e}return i}},63568:(t,e,i)=>{i.d(e,{k:()=>a});const a=(t,e=2)=>Math.round(t*10**e)/10**e},52384:(t,e,i)=>{i.d(e,{U:()=>a});const a=t=>{switch(t.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},62036:(t,e,i)=>{i.d(e,{q:()=>s});var a=i(52384);const s=(t,e)=>"°"===t?"":e&&"%"===t?(0,a.U)(e):" "},59781:(t,e,i)=>{i.r(e),i.d(e,{HaCircularProgress:()=>d});var a=i(5576),s=i(37668),n=i(54915),o=(i(62788),i(64636)),r=i(84244),c=i(55736);let d=(0,a.c)([(0,c.Kx)("ha-circular-progress")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,c.qq)({attribute:"aria-label",type:String})],key:"ariaLabel",value:()=>"Loading"},{kind:"field",decorators:[(0,c.qq)()],key:"size",value:()=>"medium"},{kind:"method",key:"updated",value:function(t){if((0,s.c)((0,n.c)(i.prototype),"updated",this).call(this,t),t.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"get",static:!0,key:"styles",value:function(){return[...(0,s.c)((0,n.c)(i),"styles",this),r.gV`:host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}`]}}]}}),o.O)},95964:(t,e,i)=>{i.r(e),i.d(e,{HaIconButtonArrowPrev:()=>r});var a=i(5576),s=i(84244),n=i(55736),o=i(63168);i(29068);let r=(0,a.c)([(0,n.Kx)("ha-icon-button-arrow-prev")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.qq)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.qq)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.K2)()],key:"_icon",value:()=>"rtl"===o.O.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"},{kind:"method",key:"render",value:function(){var t;return s.kP` <ha-icon-button .disabled="${this.disabled}" .label="${this.label||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))||"Back"}" .path="${this._icon}"></ha-icon-button> `}}]}}),s.oH)},65476:(t,e,i)=>{var a=i(5576),s=i(60876),n=i(18320),o=i(84244),r=i(55736);(0,a.c)([(0,r.Kx)("ha-top-app-bar-fixed")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[n.s,o.gV`.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}.mdc-top-app-bar__title{padding-inline-start:20px;padding-inline-end:initial}`]}]}}),s.Y)},97175:(t,e,i)=>{i.d(e,{Ax:()=>o,Q5:()=>a,ys:()=>s});const a="timestamp",s=(t,e)=>t.callWS({type:"sensor/device_class_convertible_units",device_class:e});let n;const o=async t=>n||(n=await t.callWS({type:"sensor/numeric_device_classes"}),n)},81540:(t,e,i)=>{i.d(e,{K:()=>r});var a=i(5576),s=i(37668),n=i(54915),o=i(55736);const r=t=>(0,a.c)(null,(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,s.c)((0,n.c)(i.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,s.c)((0,n.c)(i.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,s.c)((0,n.c)(i.prototype),"updated",this).call(this,t),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}]}}),t)},68836:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.r(e);var s=i(5576),n=i(37668),o=i(54915),r=i(52720),c=i(84244),d=i(55736),l=i(72092),u=i(28968),h=i(93024),m=i(20264),_=i(35616),y=i(5108),f=i(69896),g=i(76516),p=(i(59781),i(33540)),v=(i(29068),i(95964),i(66220),i(59420),i(65476),i(37272)),k=i(89726),b=i(26208),w=i(91596),$=i(32012),D=i(97175),z=i(81540),S=i(32768),L=i(55004),H=i(47724),x=i(85860),I=t([g,p,w]);[g,p,w]=I.then?(await I)():I;const P="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",C="M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z";let V=(0,s.c)(null,(function(t,e){class i extends e{constructor(){super(),t(this);const e=new Date;e.setHours(e.getHours()-1,0,0,0),this._startDate=e;const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._endDate=i}}return{F:i,d:[{kind:"field",decorators:[(0,d.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.qq)({reflect:!0,type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,d.qq)({reflect:!0,type:Boolean})],key:"rtl",value:()=>!1},{kind:"field",decorators:[(0,d.K2)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,h._)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value:()=>({})},{kind:"field",decorators:[(0,d.K2)()],key:"_isLoading",value:()=>!1},{kind:"field",decorators:[(0,d.K2)()],key:"_stateHistory",value:void 0},{kind:"field",key:"_mungedStateHistory",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_deviceEntityLookup",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_areaEntityLookup",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_areaDeviceLookup",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,d.kt)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.c)((0,o.c)(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,n.c)((0,o.c)(i.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,b.yu)(this.hass.connection,(t=>{this._deviceEntityLookup=(0,k.Oo)(t),this._areaEntityLookup=(0,v.kV)(t)})),(0,k.UN)(this.hass.connection,(t=>{this._areaDeviceLookup=(0,v.mc)(t)}))]}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){const t=this._getEntityIds().length>0;return c.kP` <ha-top-app-bar-fixed> ${this._showBack?c.kP` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${this._goBack}"></ha-icon-button-arrow-prev> `:c.kP` <ha-menu-button slot="navigationIcon" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `} <div slot="title">${this.hass.localize("panel.history")}</div> ${t?c.kP` <ha-icon-button slot="actionItems" @click="${this._removeAll}" .disabled="${this._isLoading}" .path="${C}" .label="${this.hass.localize("ui.panel.history.remove_all")}"></ha-icon-button> `:""} <ha-icon-button slot="actionItems" @click="${this._downloadHistory}" .disabled="${this._isLoading}" .path="${P}" .label="${this.hass.localize("ui.panel.history.download_data")}"></ha-icon-button> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="${this.hass}" ?disabled="${this._isLoading}" .startDate="${this._startDate}" .endDate="${this._endDate}" extendedPresets @change="${this._dateRangeChanged}"></ha-date-range-picker> <ha-target-picker .hass="${this.hass}" .value="${this._targetPickerValue}" .disabled="${this._isLoading}" addOnTop @value-changed="${this._targetsChanged}"></ha-target-picker> </div> ${this._isLoading?c.kP`<div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div>`:t?c.kP` <state-history-charts .hass="${this.hass}" .historyData="${this._mungedStateHistory}" .startTime="${this._startDate}" .endTime="${this._endDate}"> </state-history-charts> `:c.kP`<div class="start-search"> ${this.hass.localize("ui.panel.history.start_search")} </div>`} </div> </ha-top-app-bar-fixed> `}},{kind:"method",key:"mergeHistoryResults",value:function(t,e){const i={...e,line:[]},a={};for(const t of e.line){const e=(0,w.sJ)(t.unit,t.device_class,!0);e&&(a[e]={historyItem:t})}for(const e of t.line){const t=(0,w.sJ)(e.unit,e.device_class,!0);t&&(t in a?a[t].ltsItem=e:a[t]={ltsItem:e})}for(const{historyItem:t,ltsItem:e}of Object.values(a)){if(!t||!e){i.line.push(t||e);continue}const a={...t,data:[]},n=new Set([...t.data.map((t=>t.entity_id)),...e.data.map((t=>t.entity_id))]);for(const i of n){var s;const n=t.data.find((t=>t.entity_id===i)),o=e.data.find((t=>t.entity_id===i));if(!n||!o){a.data.push(n||o);continue}const r=(null===(s=n.states[0])||void 0===s?void 0:s.last_changed)||o.statistics[o.statistics.length-1].last_changed+1,c=[];for(const t of o.statistics){if(t.last_changed>=r)break;c.push(t)}a.data.push(0===c.length?n:{...n,statistics:c})}i.line.push(a)}return i}},{kind:"method",key:"willUpdate",value:function(t){if((0,n.c)((0,o.c)(i.prototype),"willUpdate",this).call(this,t),(t.has("_stateHistory")||t.has("_statisticsHistory")||t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=this.mergeHistoryResults(this._statisticsHistory,this._stateHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),this.hasUpdated)return;const e=(0,y.w5)(),a=e.entity_id,s=e.device_id,r=e.area_id;if((a||s||r)&&(this._targetPickerValue={}),a){const t=a.split(",");this._targetPickerValue.entity_id=t}if(s){const t=s.split(",");this._targetPickerValue.device_id=t}if(r){const t=r.split(",");this._targetPickerValue.area_id=t}const c=e.start_date;c&&(this._startDate=new Date(c));const d=e.end_date;d&&(this._endDate=new Date(d))}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.c)((0,o.c)(i.prototype),"firstUpdated",this).call(this,t);"1"===(0,y.w5)().back&&history.length>1&&(this._showBack=!0,(0,m.I)((0,_.O)((0,y.a8)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(t){(t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue")||!this._stateHistory&&(t.has("_deviceEntityLookup")||t.has("_areaEntityLookup")||t.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{kind:"method",key:"_getStats",value:async function(){var t;const e=this._getEntityIds();if(0===e.length)return void(this._statisticsHistory=void 0);const i=await(0,$.WU)(this.hass,this._startDate,this._endDate,e,"hour",void 0,["mean","state"]),a={};e.forEach((t=>{t in i&&(a[t]=i[t])}));const s={};Object.entries(a).forEach((([t,e])=>{const i=e.map((t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3})));s[t]=i}));const{numeric_device_classes:n}=await(0,D.Ax)(this.hass);this._statisticsHistory=(0,w.gd)(this.hass,s,this.hass.localize,n,!0),((null===(t=this._statisticsHistory)||void 0===t?void 0:t.line)||[]).forEach((t=>{t.data.forEach((t=>{t.statistics=t.states,t.states=[]}))}))}},{kind:"method",key:"_getHistory",value:async function(){const t=this._getEntityIds();if(0===t.length)return void(this._stateHistory=void 0);this._isLoading=!0,this._subscribed&&this._unsubscribeHistory();const e=new Date,{numeric_device_classes:i}=await(0,D.Ax)(this.hass);this._subscribed=(0,w.Oy)(this.hass,(t=>{this._isLoading=!1,this._stateHistory=(0,w.gd)(this.hass,t,this.hass.localize,i,!0)}),this._startDate,this._endDate,t),this._subscribed.catch((()=>{this._isLoading=!1,this._unsubscribeHistory()})),this._endDate>e&&this._setRedrawTimer()}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval);const t=new Date,e=this._endDate>t?t:this._endDate,i=(0,r.c)(e,this._startDate);this._interval=window.setInterval((()=>{var t;return null===(t=this._stateHistoryCharts)||void 0===t?void 0:t.requestUpdate()}),i<2?1e4:i<10?6e4:f.e)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((t=>null==t?void 0:t())),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this._deviceEntityLookup,this._areaEntityLookup,this._areaDeviceLookup)}},{kind:"field",key:"__getEntityIds",value:()=>(0,l.c)(((t,e,i,a)=>{if(!t||void 0===e||void 0===i||void 0===a)return[];const s=new Set;let{area_id:n,device_id:o,entity_id:r}=t;if(n){n=(0,u.C)(n);for(const t of n){const n=i[t];if(null!=n&&n.length)for(const t of n)null===t.entity_category&&s.add(t.entity_id);const o=a[t];if(null!=o&&o.length)for(const i of o){const a=e[i.id];if(null!=a&&a.length)for(const e of a)e.area_id&&e.area_id!==t||null!==e.entity_category||s.add(e.entity_id)}}}if(o){o=(0,u.C)(o);for(const t of o){const i=e[t];if(null!=i&&i.length)for(const t of i)null===t.entity_category&&s.add(t.entity_id)}}if(r){r=(0,u.C)(r);for(const t of r)s.add(t)}return[...s]}))},{kind:"method",key:"_dateRangeChanged",value:function(t){this._startDate=t.detail.startDate;const e=t.detail.endDate;0===e.getHours()&&0===e.getMinutes()&&(e.setDate(e.getDate()+1),e.setMilliseconds(e.getMilliseconds()-1)),this._endDate=e,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(t){this._targetPickerValue=t.detail.value||{},this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){const t={};this._targetPickerValue.entity_id&&(t.entity_id=(0,u.C)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.area_id&&(t.area_id=(0,u.C)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(t.device_id=(0,u.C)(this._targetPickerValue.device_id).join(",")),this._startDate&&(t.start_date=this._startDate.toISOString()),this._endDate&&(t.end_date=this._endDate.toISOString()),(0,m.I)(`/history?${(0,y.Wm)(t)}`,{replace:!0})}},{kind:"method",key:"_downloadHistory",value:function(){if(0===[...this._getEntityIds()].sort().length||!this._mungedStateHistory)return void(0,H.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const t=[""],e=["entity_id","state","last_changed"],i=new Set,a={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},s=t=>new Date(t).toISOString();for(const n of this._mungedStateHistory.line)for(const o of n.data){const n=o.entity_id,r=(0,x.o)(n),c=a[r];if(c&&!i.has(r)){i.add(r);let t=e.length;for(const i of Object.keys(c))e.push(i),c[i]=t,t+=1}if(o.statistics)for(const e of o.statistics)t.push(`${n},${e.state},${s(e.last_changed)}\n`);for(const e of o.states){const i=s(e.last_changed),a=[n,e.state,i];if(e.attributes&&c){const t=e.attributes;for(const[e,i]of Object.entries(c))e in t&&(a[i]=t[e])}t.push(a.join(",")+"\n")}}for(const e of this._mungedStateHistory.timeline){const i=e.entity_id;for(const a of e.data)t.push(`${i},${a.state},${s(a.last_changed)}\n`)}t[0]=e.join(",")+"\n";const n=new Blob(t,{type:"text/csv"}),o=window.URL.createObjectURL(n);(0,L.i)(o,"history.csv")}},{kind:"get",static:!0,key:"styles",value:function(){return[S.ao,c.gV`.content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;width:100%}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}`]}}]}}),(0,z.K)(c.oH));customElements.define("ha-panel-history",V),a()}catch(t){a(t)}}))},14804:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.r(e);var s=i(69812),n=i(89232),o=i(79016),r=i(34004),c=i(28712),d=i(90108),l=i(57684),u=i(88396),h=i(8316),m=i(39112);const t=async()=>{const t=(0,h.gt)(),e=[];(0,o.y)()&&await Promise.all([i.e(80160),i.e(72448)]).then(i.bind(i,72448)),(0,c.y)()&&await Promise.all([i.e(80962),i.e(80160),i.e(97416)]).then(i.bind(i,97416)),(0,s.y)(t)&&e.push(Promise.all([i.e(80962),i.e(30212)]).then(i.bind(i,7832)).then((()=>(0,m.L)()))),(0,n.yk)(t)&&e.push(Promise.all([i.e(80962),i.e(66784)]).then(i.bind(i,66784))),(0,r.y)(t)&&e.push(Promise.all([i.e(80962),i.e(40584)]).then(i.bind(i,40584))),(0,d.y)(t)&&e.push(Promise.all([i.e(80962),i.e(14172)]).then(i.bind(i,14172))),(0,l.y)(t)&&e.push(Promise.all([i.e(80962),i.e(60596)]).then(i.bind(i,60596)).then((()=>i.e(33704).then(i.t.bind(i,33704,23))))),(0,u.y)(t)&&e.push(Promise.all([i.e(80962),i.e(15384)]).then(i.bind(i,15384))),0!==e.length&&await Promise.all(e).then((()=>(0,m.K)(t)))};await t(),a()}catch(t){a(t)}}),1)},62124:(t,e,i)=>{i.d(e,{q:()=>a});const a=async()=>{try{new ResizeObserver((()=>{}))}catch(t){window.ResizeObserver=(await i.e(47920).then(i.bind(i,47920))).default}}},55004:(t,e,i)=>{i.d(e,{i:()=>a});const a=(t,e="")=>{const i=document.createElement("a");i.target="_blank",i.href=t,i.download=e,document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)}}};
//# sourceMappingURL=58993.A7gECAf9sqo.js.map