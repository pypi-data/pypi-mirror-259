"use strict";(self.webpackChunkvioneta_agro_frontend=self.webpackChunkvioneta_agro_frontend||[]).push([[87408],{2339:function(e,t,n){n.d(t,{i:function(){return r}});n(40068),n(42360),n(13392),n(90871);var i=[" ",": "],r=function(e,t){for(var n=e.toLowerCase(),r=0,o=i;r<o.length;r++){var s=o[r],u="".concat(t).concat(s);if(n.startsWith(u)){var c=e.substring(u.length);if(c.length)return a(c.substr(0,c.indexOf(" ")))?c:c[0].toUpperCase()+c.slice(1)}}},a=function(e){return e.toLowerCase()!==e}},77335:function(e,t,n){n.d(t,{A:function(){return a},S:function(){return r}});var i=n(29744),r=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,i.g)(r)},87408:function(e,t,n){n.d(t,{WC:function(){return m},Ss:function(){return _},Ut:function(){return b}});var i=n(13356),r=n(83928),a=n(47224),o=(n(40068),n(74339),n(82820),n(69592),n(26816),n(99616),n(12420),n(11800),n(43368),n(75032),n(3112),n(46580),n(24124),n(63728),n(17236),n(2208),n(49704),n(70368),n(63304),n(53904),n(90629),n(45528),n(12568),n(47608),n(85916),n(50836),n(67160),n(86712),n(32272),n(38316),n(90955),n(10780),n(9024),n(65212)),s=n(85860),u=n(80576),c=n(56552),l=n(2339),d=n(62792),p=n(37272),f=n(13095),y=n(80377),v=n(77335),h=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","script","sun","zone","event","tts","stt","todo"]),g=new Set(["mobile_app"]),_=function(e,t){return Object.assign({type:"grid",cards:e.map((function(e){return{type:"tile",entity:e,show_entity_picture:["person","camera","image"].includes((0,s.o)(e))}}))},t)},m=function e(t,n,i){var a,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],p=[],f=[],y=i.title?i.title.toLowerCase():void 0,v=[],h=(0,r.c)(n);try{for(h.s();!(a=h.n()).done;){var g=a.value,_=t[g],m=(0,s.o)(g);if("alarm_control_panel"===m){var b={type:"alarm-panel",entity:g};p.push(b)}else if("camera"===m){var w={type:"picture-entity",entity:g};p.push(w)}else if("image"===m){var E={type:"picture",image_entity:g};p.push(E)}else if("climate"===m){var C,W,k,O={type:"thermostat",entity:g,features:(null!==(C=null===(W=t[g])||void 0===W||null===(W=W.attributes)||void 0===W||null===(W=W.hvac_modes)||void 0===W?void 0:W.length)&&void 0!==C?C:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(k=t[g])||void 0===k||null===(k=k.attributes)||void 0===k?void 0:k.hvac_modes}]:void 0};p.push(O)}else if("humidifier"===m){var j={type:"humidifier",entity:g,features:[{type:"humidifier-toggle"}]};p.push(j)}else if("media_player"===m){var x={type:"media-control",entity:g};p.push(x)}else if("plant"===m){var S={type:"plant-status",entity:g};p.push(S)}else if("weather"===m){var I={type:"weather-forecast",entity:g,show_forecast:!1};p.push(I)}else if(!u||"scene"!==m&&"script"!==m){var U=void 0,L=y&&_&&(U=(0,l.i)((0,c.W)(_),y))?{entity:g,name:U}:g;f.push(L)}else{var P={entity:g,show_icon:!0,show_name:!0},V=void 0;y&&_&&(V=(0,l.i)((0,c.W)(_),y))&&(P.name=V),v.push(P)}}}catch(z){h.e(z)}finally{h.f()}if(f.sort((function(e,n){var i="string"==typeof e?e:e.entity,r="string"==typeof n?n:n.entity,a=o.Ev.includes((0,s.o)(i))?"sensor":"control";return a!==(o.Ev.includes((0,s.o)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.I)("string"==typeof e?t[e]?(0,c.W)(t[e]):"":e.name||"","string"==typeof n?t[n]?(0,c.W)(t[n]):"":n.name||"")})),0===f.length&&v.length>0)return e(t,n,i,!1);if(f.length>0||v.length>0){var q=Object.assign({type:"entities",entities:f},i);v.length>0&&(q.footer={type:"buttons",entities:v}),p.unshift(q)}return p.length<2?p:[{type:"grid",square:!1,columns:1,cards:p}]},b=function(e,t,n,o,l,_,b,w,E){for(var C,W,k=function(e,t){for(var n={},i=new Set(Object.values(t).filter((function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden})).map((function(e){return e.entity_id}))),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];h.has((0,u.S)(s))||i.has(s.entity_id)||(n[o]=e[o])}return n}(o,n),O={},j=0,x=Object.keys(k);j<x.length;j++){var S=x[j],I=k[S];I.attributes.order&&(O[S]=I.attributes.order)}var U=function(e,t,n,i){for(var r=Object.assign({},i),o={},s={},u=0,c=Object.values(n);u<c.length;u++){var l,d=c[u],p=d.area_id||d.device_id&&(null===(l=t[d.device_id])||void 0===l?void 0:l.area_id);p&&p in e&&d.entity_id in r?(p in o||(o[p]=[]),o[p].push(r[d.entity_id]),delete r[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in r&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(r[d.entity_id]),delete r[d.entity_id])}for(var f=0,y=Object.entries(s);f<y.length;f++){var v=(0,a.c)(y[f],2),h=v[0],g=v[1];1===g.length&&(r[g[0].entity_id]=g[0],delete s[h])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:r}}(e,t,n,k);if(null!=b&&b.hidden){var L,P=(0,r.c)(b.hidden);try{for(P.s();!(L=P.n()).done;){var V=L.value;delete U.areasWithEntities[V]}}catch(re){P.e(re)}finally{P.f()}}w&&(U.devicesWithEntities={},U.otherEntities={});var q=function(e){var t=[],n={};return Object.keys(e).forEach((function(i){var r=e[i];"group"===(0,s.o)(i)?t.push(r):n[i]=r})),t.forEach((function(e){return e.attributes.entity_id.forEach((function(e){delete n[e]}))})),{groups:t,ungrouped:n}}(U.otherEntities);q.groups.sort((function(e,t){return O[e.entity_id]-O[t.entity_id]}));var z,R=[],A=(0,r.c)(q.groups);try{for(A.s();!(z=A.n()).done;){var B=z.value;R.push.apply(R,(0,i.c)(m(o,B.attributes.entity_id,{title:(0,c.W)(B),show_header_toggle:"hidden"!==B.attributes.control})))}}catch(re){A.e(re)}finally{A.f()}var H,N=function(e,t,n,a,o){for(var s={},l=0,p=Object.keys(o);l<p.length;l++){var h=p[l],g=o[h],_=(0,u.S)(g);_ in s||(s[_]=[]),s[_].push(g.entity_id)}var b=[];if("person"in s){var w=[];if(1===s.person.length)b.push({type:"entities",entities:s.person});else{var E,C,W="",k=(0,r.c)(s.person);try{for(k.s();!(C=k.n()).done;){var O=C.value,j=o[O],x=j.attributes.entity_picture;if(!x){if(void 0===E){var S=getComputedStyle(document.body);E=encodeURIComponent(S.getPropertyValue("--light-primary-color").trim()),W=encodeURIComponent((S.getPropertyValue("--text-light-primary-color")||S.getPropertyValue("--primary-text-color")).trim())}var I=(0,y.oN)(j.attributes.friendly_name||"");x="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(E,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(W,"' font-size='1.3em' dy='.3em'%3E").concat(I,"%3C/text%3E%3C/g%3E%3C/svg%3E")}w.push({type:"picture-entity",entity:O,aspect_ratio:"1",show_name:!1,image:x})}}catch(re){k.e(re)}finally{k.f()}b.push({type:"grid",square:!0,columns:3,cards:w})}delete s.person}var U,L=[],P=(0,r.c)(v.S);try{for(P.s();!(U=P.n()).done;){var V=U.value;V in s&&(L.push.apply(L,(0,i.c)(s[V])),delete s[V])}}catch(re){P.e(re)}finally{P.f()}for(var q={},z=0,R=Object.keys(s);z<R.length;z++){var A=R[z];q[A]=(0,f.m)(e,A)}L.length&&(s._helpers=L,q._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort((function(e,t){return(0,d.I)(q[e],q[t])})).forEach((function(e){b.push.apply(b,(0,i.c)(m(o,s[e].sort((function(e,t){return(0,d.I)((0,c.W)(o[e]),(0,c.W)(o[t]))})),{title:q[e]})))}));var B={path:t,title:n,cards:b};return a&&(B.icon=a),B}(l,"default_view","Home",undefined,q.ungrouped),D=[],F=Object.keys(U.areasWithEntities).sort((0,p.C8)(e,null==b?void 0:b.order)),G=(0,r.c)(F);try{for(G.s();!(H=G.n()).done;){var J=H.value,K=U.areasWithEntities[J],M=e[J];D.push.apply(D,(0,i.c)(m(o,K.map((function(e){return e.entity_id})),{title:M.name})))}}catch(re){G.e(re)}finally{G.f()}var Q,T,X=[],Y=Object.entries(U.devicesWithEntities).sort((function(e,n){var i=t[e[0]],r=t[n[0]];return(0,d.I)(i.name_by_user||i.name||"",r.name_by_user||r.name||"")})),Z=(0,r.c)(Y);try{for(Z.s();!(Q=Z.n()).done;){var $=(0,a.c)(Q.value,2),ee=$[0],te=$[1],ne=t[ee];X.push.apply(X,(0,i.c)(m(o,te.map((function(e){return e.entity_id})),{title:ne.name_by_user||ne.name||l("ui.panel.config.devices.unnamed_device",{type:l("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(re){Z.e(re)}finally{Z.f()}if(_&&!E){var ie=_.energy_sources.find((function(e){return"grid"===e.type}));ie&&ie.flow_from.length>0&&(T={title:l("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(C=N.cards).unshift.apply(C,D.concat(R,(0,i.c)(T?[T]:[]))),(W=N.cards).push.apply(W,X),N}}}]);
//# sourceMappingURL=87408.tN3xP9K2t-E.js.map