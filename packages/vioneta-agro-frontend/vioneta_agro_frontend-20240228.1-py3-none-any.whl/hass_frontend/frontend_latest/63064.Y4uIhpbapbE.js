export const id=63064;export const ids=[63064];export const modules={69912:(e,t,i)=>{i.d(t,{Y:()=>n});var o=i(84244),r=i(17072);const n=(0,r.E$)(class extends r.QN{constructor(e){if(super(e),this._element=void 0,e.type!==r.sZ.CHILD)throw new Error("dynamicElementDirective can only be used in content bindings")}update(e,[t,i]){return this._element&&this._element.localName===t?(i&&Object.entries(i).forEach((([e,t])=>{this._element[e]=t})),o.Kg):this.render(t,i)}render(e,t){return this._element=document.createElement(e),t&&Object.entries(t).forEach((([e,t])=>{this._element[e]=t})),this._element}})},16072:(e,t,i)=>{i.d(t,{C:()=>r});var o=i(992);const r=(e,t)=>{if(!(t instanceof o.a4))return{warnings:[t.message],errors:void 0};const i=[],r=[];for(const o of t.failures())if(void 0===o.value)i.push(e.localize("ui.errors.config.key_missing",{key:o.path.join(".")}));else if("never"===o.type)r.push(e.localize("ui.errors.config.key_not_expected",{key:o.path.join(".")}));else{if("union"===o.type)continue;"enums"===o.type?r.push(e.localize("ui.errors.config.key_wrong_type",{key:o.path.join("."),type_correct:o.message.replace("Expected ","").split(", ")[0],type_wrong:JSON.stringify(o.value)})):r.push(e.localize("ui.errors.config.key_wrong_type",{key:o.path.join("."),type_correct:o.refinement||o.type,type_wrong:JSON.stringify(o.value)}))}return{warnings:r,errors:i}}},66584:(e,t,i)=>{var o=i(5576),r=i(37668),n=i(54915),a=i(84244),s=i(55736),d=i(72092),l=i(90360),c=i(77748);i(21622);const h={key:"Mod-s",run:e=>((0,l.O)(e.dom,"editor-save"),!0)},u=e=>{const t=document.createElement("ha-icon");return t.icon=e.label,t};(0,o.c)([(0,s.Kx)("ha-code-editor")],(function(e,t){class o extends t{constructor(...t){super(...t),e(this)}}return{F:o,d:[{kind:"field",key:"codemirror",value:void 0},{kind:"field",decorators:[(0,s.qq)()],key:"mode",value:()=>"yaml"},{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,s.qq)({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[(0,s.qq)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,s.qq)({type:Boolean,attribute:"autocomplete-entities"})],key:"autocompleteEntities",value:()=>!1},{kind:"field",decorators:[(0,s.qq)({type:Boolean,attribute:"autocomplete-icons"})],key:"autocompleteIcons",value:()=>!1},{kind:"field",decorators:[(0,s.qq)({type:Boolean})],key:"error",value:()=>!1},{kind:"field",decorators:[(0,s.K2)()],key:"_value",value:()=>""},{kind:"field",key:"_loadedCodeMirror",value:void 0},{kind:"field",key:"_iconList",value:void 0},{kind:"set",key:"value",value:function(e){this._value=e}},{kind:"get",key:"value",value:function(){return this.codemirror?this.codemirror.state.doc.toString():this._value}},{kind:"get",key:"hasComments",value:function(){if(!this.codemirror||!this._loadedCodeMirror)return!1;const e=this._loadedCodeMirror.highlightingFor(this.codemirror.state,[this._loadedCodeMirror.tags.comment]);return!!this.renderRoot.querySelector(`span.${e}`)}},{kind:"method",key:"connectedCallback",value:function(){(0,r.c)((0,n.c)(o.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this.requestUpdate(),this.addEventListener("keydown",c.I),this.codemirror&&!1!==this.autofocus&&this.codemirror.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,r.c)((0,n.c)(o.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("keydown",c.I),this.updateComplete.then((()=>{this.codemirror.destroy(),delete this.codemirror}))}},{kind:"method",key:"scheduleUpdate",value:async function(){var e;null!==(e=this._loadedCodeMirror)&&void 0!==e||(this._loadedCodeMirror=await Promise.all([i.e(10712),i.e(44602),i.e(26108)]).then(i.bind(i,26108))),(0,r.c)((0,n.c)(o.prototype),"scheduleUpdate",this).call(this)}},{kind:"method",key:"update",value:function(e){if((0,r.c)((0,n.c)(o.prototype),"update",this).call(this,e),!this.codemirror)return void this._createCodeMirror();const t=[];e.has("mode")&&t.push({effects:this._loadedCodeMirror.langCompartment.reconfigure(this._mode)}),e.has("readOnly")&&t.push({effects:this._loadedCodeMirror.readonlyCompartment.reconfigure(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly))}),e.has("_value")&&this._value!==this.value&&t.push({changes:{from:0,to:this.codemirror.state.doc.length,insert:this._value}}),t.length>0&&this.codemirror.dispatch(...t),e.has("error")&&this.classList.toggle("error-state",this.error)}},{kind:"get",key:"_mode",value:function(){return this._loadedCodeMirror.langs[this.mode]}},{kind:"method",key:"_createCodeMirror",value:function(){if(!this._loadedCodeMirror)throw new Error("Cannot create editor before CodeMirror is loaded");const e=[this._loadedCodeMirror.lineNumbers(),this._loadedCodeMirror.history(),this._loadedCodeMirror.drawSelection(),this._loadedCodeMirror.EditorState.allowMultipleSelections.of(!0),this._loadedCodeMirror.rectangularSelection(),this._loadedCodeMirror.crosshairCursor(),this._loadedCodeMirror.highlightSelectionMatches(),this._loadedCodeMirror.highlightActiveLine(),this._loadedCodeMirror.keymap.of([...this._loadedCodeMirror.defaultKeymap,...this._loadedCodeMirror.searchKeymap,...this._loadedCodeMirror.historyKeymap,...this._loadedCodeMirror.tabKeyBindings,h]),this._loadedCodeMirror.langCompartment.of(this._mode),this._loadedCodeMirror.haTheme,this._loadedCodeMirror.haSyntaxHighlighting,this._loadedCodeMirror.readonlyCompartment.of(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)),this._loadedCodeMirror.EditorView.updateListener.of(this._onUpdate)];if(!this.readOnly){const t=[];this.autocompleteEntities&&this.hass&&t.push(this._entityCompletions.bind(this)),this.autocompleteIcons&&t.push(this._mdiCompletions.bind(this)),t.length>0&&e.push(this._loadedCodeMirror.autocompletion({override:t,maxRenderedOptions:10}))}this.codemirror=new this._loadedCodeMirror.EditorView({state:this._loadedCodeMirror.EditorState.create({doc:this._value,extensions:e}),parent:this.renderRoot})}},{kind:"field",key:"_getStates",value:()=>(0,d.c)((e=>{if(!e)return[];return Object.keys(e).map((t=>({type:"variable",label:t,detail:e[t].attributes.friendly_name,info:`State: ${e[t].state}`})))}))},{kind:"method",key:"_entityCompletions",value:function(e){const t=e.matchBefore(/[a-z_]{3,}\.\w*/);if(!t||t.from===t.to&&!e.explicit)return null;const i=this._getStates(this.hass.states);return i&&i.length?{from:Number(t.from),options:i,validFor:/^[a-z_]{3,}\.\w*$/}:null}},{kind:"field",key:"_getIconItems",value(){return async()=>{if(!this._iconList){let e;e=(await i.e(87192).then(i.t.bind(i,64812,19))).default,this._iconList=e.map((e=>({type:"variable",label:`mdi:${e.name}`,detail:e.keywords.join(", "),info:u})))}return this._iconList}}},{kind:"method",key:"_mdiCompletions",value:async function(e){const t=e.matchBefore(/mdi:\S*/);if(!t||t.from===t.to&&!e.explicit)return null;const i=await this._getIconItems();return{from:Number(t.from),options:i,validFor:/^mdi:\S*$/}}},{kind:"field",key:"_onUpdate",value(){return e=>{e.docChanged&&(this._value=e.state.doc.toString(),(0,l.O)(this,"value-changed",{value:this._value}))}}},{kind:"get",static:!0,key:"styles",value:function(){return a.gV`:host(.error-state) .cm-gutters{border-color:var(--error-state-color,red)}`}}]}}),a.i6)},6244:(e,t,i)=>{i.d(t,{M:()=>o});const o=["relative","total","date","time","datetime"]},34648:(e,t,i)=>{i.d(t,{G:()=>p});var o=i(5576),r=i(37668),n=i(54915),a=(i(86480),i(18392)),s=i(84244),d=i(55736),l=i(90360),c=i(16072),h=i(42132),u=(i(61016),i(59781),i(66584),i(72092)),m=i(992),f=i(85860),g=(i(97084),i(82724));const v={none:{},"entity-id":{},"last-changed":{},"last-updated":{},"last-triggered":{domains:["automation","script"]},position:{domains:["cover"]},"tilt-position":{domains:["cover"]},brightness:{domains:["light"]}};(0,o.c)([(0,d.Kx)("hui-generic-entity-row-editor")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,d.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_config",value:void 0},{kind:"method",key:"setConfig",value:function(e){(0,m.Uc)(e,g.s),this._config=e}},{kind:"field",key:"_schema",value:()=>(0,u.c)(((e,t)=>{const i=(0,f.o)(e);return[{name:"entity",required:!0,selector:{entity:{}}},{type:"grid",name:"",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}}]},{name:"secondary_info",selector:{select:{options:Object.keys(v).filter((e=>!("domains"in v[e])||"domains"in v[e]&&v[e].domains.includes(i))).map((e=>({value:e,label:t(`ui.panel.lovelace.editor.card.entities.secondary_info_values.${e}`)})))}}}]}))},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return s.qs;const e=this._schema(this._config.entity,this.hass.localize);return s.kP` <ha-form .hass="${this.hass}" .data="${this._config}" .schema="${e}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){(0,l.O)(this,"config-changed",{config:e.detail.value})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>"secondary_info"===e.name?this.hass.localize(`ui.panel.lovelace.editor.card.entity-row.${e.name}`):this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e.name}`)}}]}}),s.oH);class _ extends Error{constructor(e,t,i){super(e),this.warnings=void 0,this.errors=void 0,this.name="GUISupportError",this.warnings=t,this.errors=i}}let p=(0,o.c)(null,(function(e,t){class o extends t{constructor(...t){super(...t),e(this)}}return{F:o,d:[{kind:"field",decorators:[(0,d.qq)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.qq)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,d.qq)({attribute:!1})],key:"context",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_yaml",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_configElement",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_configElementType",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_guiMode",value:()=>!0},{kind:"field",decorators:[(0,d.K2)()],key:"_errors",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_guiSupported",value:void 0},{kind:"field",decorators:[(0,d.K2)()],key:"_loading",value:()=>!1},{kind:"field",decorators:[(0,d.kt)("ha-code-editor")],key:"_yamlEditor",value:void 0},{kind:"get",key:"yaml",value:function(){return this._yaml||(this._yaml=(0,a.dump)(this._config)),this._yaml||""}},{kind:"set",key:"yaml",value:function(e){this._yaml=e;try{this._config=(0,a.load)(this.yaml),this._errors=void 0}catch(e){this._errors=[e.message]}this._setConfig()}},{kind:"get",key:"value",value:function(){return this._config}},{kind:"set",key:"value",value:function(e){this._config&&(0,h.I)(e,this._config)||(this._config=e,this._yaml=void 0,this._errors=void 0,this._setConfig())}},{kind:"method",key:"_setConfig",value:function(){if(!this._errors)try{this._updateConfigElement()}catch(e){this._errors=[e.message]}this.updateComplete.then((()=>{var e;(0,l.O)(this,"config-changed",{config:this.value,error:null===(e=this._errors)||void 0===e?void 0:e.join(", "),guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})}))}},{kind:"get",key:"hasWarning",value:function(){return void 0!==this._warnings&&this._warnings.length>0}},{kind:"get",key:"hasError",value:function(){return void 0!==this._errors&&this._errors.length>0}},{kind:"get",key:"GUImode",value:function(){return this._guiMode}},{kind:"set",key:"GUImode",value:function(e){this._guiMode=e,this.updateComplete.then((()=>{(0,l.O)(this,"GUImode-changed",{guiMode:e,guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})}))}},{kind:"method",key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{kind:"method",key:"focusYamlEditor",value:function(){var e,t;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),null!==(t=this._yamlEditor)&&void 0!==t&&t.codemirror&&this._yamlEditor.codemirror.focus()}},{kind:"method",key:"getConfigElement",value:async function(){}},{kind:"method",key:"getConfigForm",value:async function(){}},{kind:"get",key:"configElementType",value:function(){return this.value?this.value.type:void 0}},{kind:"method",key:"render",value:function(){return s.kP` <div class="wrapper"> ${this.GUImode?s.kP` <div class="gui-editor"> ${this._loading?s.kP` <ha-circular-progress indeterminate class="center margin-bot"></ha-circular-progress> `:this._configElement} </div> `:s.kP` <div class="yaml-editor"> <ha-code-editor mode="yaml" autofocus autocomplete-entities autocomplete-icons .hass="${this.hass}" .value="${this.yaml}" .error="${Boolean(this._errors)}" @value-changed="${this._handleYAMLChanged}" @keydown="${this._ignoreKeydown}" dir="ltr"></ha-code-editor> </div> `} ${!1===this._guiSupported&&this.configElementType?s.kP` <div class="info"> ${this.hass.localize("ui.errors.config.editor_not_available",{type:this.configElementType})} </div> `:""} ${this.hasError?s.kP` <div class="error"> ${this.hass.localize("ui.errors.config.error_detected")}: <br> <ul> ${this._errors.map((e=>s.kP`<li>${e}</li>`))} </ul> </div> `:""} ${this.hasWarning?s.kP` <ha-alert alert-type="warning" .title="${this.hass.localize("ui.errors.config.editor_not_supported")}:"> ${this._warnings.length>0&&void 0!==this._warnings[0]?s.kP` <ul> ${this._warnings.map((e=>s.kP`<li>${e}</li>`))} </ul>`:""} ${this.hass.localize("ui.errors.config.edit_in_yaml_supported")} </ha-alert> `:""} </div> `}},{kind:"method",key:"updated",value:function(e){(0,r.c)((0,n.c)(o.prototype),"updated",this).call(this,e),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{kind:"method",key:"_handleUIConfigChanged",value:function(e){e.stopPropagation();const t=e.detail.config;Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]})),this.value=t}},{kind:"method",key:"_handleYAMLChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t!==this.yaml&&(this.yaml=t)}},{kind:"method",key:"_updateConfigElement",value:async function(){if(!this.value)return;let e;try{if(this._errors=void 0,this._warnings=void 0,this._configElementType!==this.configElementType){if(this._guiSupported=void 0,this._configElement=void 0,!this.configElementType)throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));if(this._configElementType=this.configElementType,this._loading=!0,e=await this.getConfigElement(),!e){const t=await this.getConfigForm();if(t){await i.e(73908).then(i.bind(i,73908)),e=document.createElement("hui-form-editor");const{schema:o,assertConfig:r,computeLabel:n,computeHelper:a}=t;e.schema=o,n&&(e.computeLabel=n),a&&(e.computeHelper=a),r&&(e.assertConfig=r)}}e&&(e.hass=this.hass,"lovelace"in e&&(e.lovelace=this.lovelace),e.context=this.context,e.addEventListener("config-changed",(e=>this._handleUIConfigChanged(e))),this._configElement=e,this._guiSupported=!0)}if(this._configElement)try{this._configElement.setConfig(this.value)}catch(e){const t=(0,c.C)(this.hass,e);throw new _("Config is not supported",t.warnings,t.errors)}else this._guiSupported=!1,this.GUImode=!1}catch(e){var t;if(e instanceof _)this._warnings=null!==(t=e.warnings)&&void 0!==t?t:[e.message],this._errors=e.errors||void 0;else this._errors=[e.message];this.GUImode=!1}finally{this._loading=!1}}},{kind:"method",key:"_ignoreKeydown",value:function(e){e.stopPropagation()}},{kind:"get",static:!0,key:"styles",value:function(){return s.gV`:host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}.error,.info,.warning{word-break:break-word;margin-top:8px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.error ul,.warning ul{margin:4px 0}.error li,.warning li{white-space:pre-wrap}ha-circular-progress{display:block;margin:auto}`}}]}}),s.oH)},63504:(e,t,i)=>{i.d(t,{O:()=>h});var o=i(992);const r=(0,o.kt)({user:(0,o.Qb)()}),n=(0,o.SQ)([(0,o.cT)(),(0,o.kt)({text:(0,o.Q3)((0,o.Qb)()),excemptions:(0,o.Q3)((0,o.M$)(r))})]),a=(0,o.kt)({action:(0,o.uA)("url"),url_path:(0,o.Qb)(),confirmation:(0,o.Q3)(n)}),s=(0,o.kt)({action:(0,o.uA)("call-service"),service:(0,o.Qb)(),service_data:(0,o.Q3)((0,o.kt)()),data:(0,o.Q3)((0,o.kt)()),target:(0,o.Q3)((0,o.kt)({entity_id:(0,o.Q3)((0,o.SQ)([(0,o.Qb)(),(0,o.M$)((0,o.Qb)())])),device_id:(0,o.Q3)((0,o.SQ)([(0,o.Qb)(),(0,o.M$)((0,o.Qb)())])),area_id:(0,o.Q3)((0,o.SQ)([(0,o.Qb)(),(0,o.M$)((0,o.Qb)())]))})),confirmation:(0,o.Q3)(n)}),d=(0,o.kt)({action:(0,o.uA)("navigate"),navigation_path:(0,o.Qb)(),navigation_replace:(0,o.Q3)((0,o.cT)()),confirmation:(0,o.Q3)(n)}),l=(0,o.s$)({action:(0,o.uA)("assist"),pipeline_id:(0,o.Q3)((0,o.Qb)()),start_listening:(0,o.Q3)((0,o.cT)())}),c=(0,o.kt)({action:(0,o.Ix)(["none","toggle","more-info","call-service","url","navigate","assist"]),confirmation:(0,o.Q3)(n)}),h=(0,o.kz)((e=>{if(e&&"object"==typeof e&&"action"in e)switch(e.action){case"call-service":return s;case"navigate":return d;case"url":return a;case"assist":return l}return c}))},82724:(e,t,i)=>{i.d(t,{s:()=>a});var o=i(992),r=i(6244),n=i(63504);const a=(0,o.SQ)([(0,o.kt)({entity:(0,o.Qb)(),name:(0,o.Q3)((0,o.Qb)()),icon:(0,o.Q3)((0,o.Qb)()),image:(0,o.Q3)((0,o.Qb)()),secondary_info:(0,o.Q3)((0,o.Qb)()),format:(0,o.Q3)((0,o.Ix)(r.M)),state_color:(0,o.Q3)((0,o.cT)()),tap_action:(0,o.Q3)(n.O),hold_action:(0,o.Q3)(n.O),double_tap_action:(0,o.Q3)(n.O)}),(0,o.Qb)()])}};
//# sourceMappingURL=63064.Y4uIhpbapbE.js.map