{"version":3,"file":"lib_index_js.454e946da84f62827b00.js","mappings":"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","sources":["webpack://papyri-lab/./src/handler.ts","webpack://papyri-lab/./src/index.tsx","webpack://papyri-lab/./src/kernelspy.ts","webpack://papyri-lab/./src/papyri-comp.tsx","webpack://papyri-lab/./src/widgets.tsx"],"sourcesContent":["import { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI<T>(\n  endPoint = '',\n  init: RequestInit = {}\n): Promise<T> {\n  // Make request to Jupyter API\n  const settings = ServerConnection.makeSettings();\n  const requestUrl = URLExt.join(\n    settings.baseUrl,\n    'papyri-lab', // API Namespace\n    endPoint\n  );\n\n  let response: Response;\n  try {\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n  } catch (error) {\n    throw new ServerConnection.NetworkError(error as any);\n  }\n\n  let data: any = await response.text();\n\n  if (data.length > 0) {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      console.log('Not a JSON response body.', response);\n    }\n  }\n\n  if (!response.ok) {\n    throw new ServerConnection.ResponseError(response, data.message || data);\n  }\n\n  return data;\n}\n","// Entry point for the Papyri jupyter Lab extension.\n//\nimport { KernelSpyModel } from './kernelspy';\nimport { PapyriPanel } from './widgets';\nimport {\n  ILayoutRestorer,\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport {\n  ICommandPalette,\n  MainAreaWidget,\n  WidgetTracker\n} from '@jupyterlab/apputils';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\n\n/**\n * Initialization data for the papyri-lab extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'papyri-lab:plugin',\n  description: 'A JupyterLab extension for papyri',\n  autoStart: true,\n  optional: [ISettingRegistry, ILayoutRestorer],\n  requires: [ICommandPalette, INotebookTracker],\n  activate: (\n    app: JupyterFrontEnd,\n    palette: ICommandPalette,\n    notebookTracker: INotebookTracker,\n    settingRegistry: ISettingRegistry | null,\n    restorer: ILayoutRestorer | null\n  ) => {\n    console.log('JupyterLab extension papyri-lab is activated!');\n    if (settingRegistry) {\n      settingRegistry\n        .load(plugin.id)\n        .then(settings => {\n          console.log('papyri-lab settings loaded:', settings.composite);\n        })\n        .catch(reason => {\n          console.error('Failed to load settings for papyri-lab.', reason);\n        });\n    }\n\n    const newWidget = () => {\n      // Create a blank content widget inside of a MainAreaWidget\n      return new MainAreaWidget({ content: new PapyriPanel() });\n    };\n    let widget: MainAreaWidget<PapyriPanel>;\n\n    // Track and restore the widget state\n    const tracker = new WidgetTracker<MainAreaWidget<PapyriPanel>>({\n      namespace: 'papyri'\n    });\n\n    const command: string = 'papyri:open';\n    app.commands.addCommand(command, {\n      label: 'Open Papyri Browser',\n      execute: () => {\n        // Regenerate the widget if disposed\n        if (!widget || widget.isDisposed) {\n          widget = newWidget();\n        }\n        if (!tracker.has(widget)) {\n          // Track the state of the widget for later restoration\n          tracker.add(widget);\n        }\n        if (!widget.isAttached) {\n          // Attach the widget to the main work area if it's not there\n          app.shell.add(widget, 'main');\n        }\n        // Activate the widget\n        app.shell.activateById(widget.id);\n      }\n    });\n\n    // Add the command to the palette.\n    palette.addItem({ command, category: 'Tutorial' });\n\n    if (restorer) {\n      restorer.restore(tracker, {\n        command,\n        name: () => 'papyri'\n      });\n    }\n\n    const kernelSpy = new KernelSpyModel(notebookTracker);\n    kernelSpy.questionMarkSubmitted.connect((_, args) => {\n      console.info('KSpy questionMarkSubmitted args:', args);\n      if (args !== undefined) {\n        console.info('DO your thing here.');\n      }\n    });\n  }\n};\n\nexport default plugin;\n","// This module implement an object that spies on the kernel messages\n// to intercept documentation print request.\nimport { VDomModel } from '@jupyterlab/apputils';\nimport { INotebookTracker, NotebookPanel } from '@jupyterlab/notebook';\nimport { Kernel, KernelMessage } from '@jupyterlab/services';\nimport { Signal, ISignal } from '@lumino/signaling';\n\nexport type MessageThread = {\n  args: Kernel.IAnyMessageArgs;\n  children: MessageThread[];\n};\n\nfunction isHeader(\n  candidate: { [key: string]: undefined } | KernelMessage.IHeader\n): candidate is KernelMessage.IHeader {\n  return candidate.msg_id !== undefined;\n}\n\n/**\n * Model for a kernel spy.\n */\nexport class KernelSpyModel extends VDomModel {\n  // constructor(kernel?: Kernel.IKernelConnection | null) {\n  constructor(notebookTracker: INotebookTracker, path?: string) {\n    console.log('notebook tracker constructed');\n    super();\n    this._notebookTracker = notebookTracker;\n    this._notebookTracker.currentChanged.connect(this.onNotebookChanged, this);\n    this.onNotebookChanged(undefined, { path });\n  }\n\n  onNotebookChanged(sender: any, args: any) {\n    console.log('notebook changed', args);\n    // onNotebookChanged(notebookTracker: INotebookTracker, path?: string) {\n    if (args.path) {\n      this._notebook =\n        this._notebookTracker.find(nb => nb.context.path === args.path) ?? null;\n    } else {\n      this._notebook = this._notebookTracker.currentWidget;\n    }\n\n    if (this._notebook) {\n      this.kernel =\n        this._notebook.context.sessionContext?.session?.kernel ?? null;\n      this._notebook.context.sessionContext.kernelChanged.connect((_, args) => {\n        this.kernel = args.newValue;\n      });\n    } else {\n      this.kernel = null;\n    }\n  }\n\n  clear() {\n    this._log.splice(0, this._log.length);\n    this._messages = {};\n    this._childLUT = {};\n    this._roots = [];\n    this.stateChanged.emit(void 0);\n  }\n\n  get kernel() {\n    return this._kernel;\n  }\n\n  set kernel(value: Kernel.IKernelConnection | null) {\n    if (this._kernel) {\n      this._kernel.anyMessage.disconnect(this.onMessage, this);\n    }\n    this._kernel = value;\n    if (this._kernel) {\n      this._kernel.anyMessage.connect(this.onMessage, this);\n    }\n  }\n\n  get log(): ReadonlyArray<Kernel.IAnyMessageArgs> {\n    return this._log;\n  }\n\n  get tree(): MessageThread[] {\n    return this._roots.map(rootId => {\n      return this.getThread(rootId, false);\n    });\n  }\n\n  depth(args: Kernel.IAnyMessageArgs | null): number {\n    if (args === null) {\n      return -1;\n    }\n    let depth = 0;\n    while ((args = this._findParent(args))) {\n      ++depth;\n    }\n    return depth;\n  }\n\n  getThread(msgId: string, ancestors = true): MessageThread {\n    const args = this._messages[msgId];\n    if (ancestors) {\n      // Work up to root, then work downwards\n      let root = args;\n      let candidate;\n      while ((candidate = this._findParent(root))) {\n        root = candidate;\n      }\n      return this.getThread(root.msg.header.msg_id, false);\n    }\n\n    const childMessages = this._childLUT[msgId] || [];\n    const childThreads = childMessages.map(childId => {\n      return this.getThread(childId, false);\n    });\n    const thread: MessageThread = {\n      args: this._messages[msgId],\n      children: childThreads\n    };\n    return thread;\n  }\n\n  get questionMarkSubmitted(): ISignal<KernelSpyModel, string> {\n    return this._questionMarkSubmitted;\n  }\n\n  protected onMessage(\n    sender: Kernel.IKernelConnection,\n    args: Kernel.IAnyMessageArgs\n  ) {\n    const { msg } = args;\n    this._log.push(args);\n    this._messages[msg.header.msg_id] = args;\n    const parent = this._findParent(args);\n    if (parent === null) {\n      this._roots.push(msg.header.msg_id);\n    } else {\n      const header = parent.msg.header;\n      this._childLUT[header.msg_id] = this._childLUT[header.msg_id] || [];\n      this._childLUT[header.msg_id].push(msg.header.msg_id);\n    }\n\n    // Log the kernel message here.\n    if (args.direction === 'recv') {\n      const msg: any = args.msg;\n      if (\n        msg.channel === 'shell' &&\n        msg.content !== undefined &&\n        msg.content.payload !== undefined &&\n        msg.content.payload.length > 0\n      ) {\n        console.log(msg.content.payload[0].data);\n        console.log(msg.content.payload[0].data['x-vendor/papyri']);\n        this._questionMarkSubmitted.emit(\n          msg.content.payload[0].data['x-vendor/papyri']\n        );\n        console.log('QMS:', this._questionMarkSubmitted);\n      }\n    }\n    this.stateChanged.emit(undefined);\n  }\n\n  private _findParent(\n    args: Kernel.IAnyMessageArgs\n  ): Kernel.IAnyMessageArgs | null {\n    if (isHeader(args.msg.parent_header)) {\n      return this._messages[args.msg.parent_header.msg_id] || null;\n    }\n    return null;\n  }\n\n  private _log: Kernel.IAnyMessageArgs[] = [];\n  private _kernel: Kernel.IKernelConnection | null = null;\n  private _messages: { [key: string]: Kernel.IAnyMessageArgs } = {};\n  private _childLUT: { [key: string]: string[] } = {};\n  private _roots: string[] = [];\n  private _notebook: NotebookPanel | null = null;\n  private _notebookTracker: INotebookTracker;\n  private _questionMarkSubmitted = new Signal<KernelSpyModel, string>(this);\n}\n","// Global and other papyri-myst related componets\nimport { DEFAULT_RENDERERS, MyST } from 'myst-to-react';\nimport React from 'react';\nimport { createContext, useContext } from 'react';\n\nexport const SearchContext = createContext(async (query: string) => {\n  return true;\n});\n\nconst MyLink = ({ node }: any) => {\n  const onSearch = useContext(SearchContext);\n  const parts = node.url.split('/');\n  const search_term = parts[parts.length - 1];\n  const f = (q: string) => {\n    onSearch(q);\n  };\n\n  return (\n    <a onClick={() => f(search_term)}>\n      <MyST ast={node.children} />\n    </a>\n  );\n};\n\nconst DefaultComponent = ({ node }: { node: any }) => {\n  if (!node.children) {\n    return <span>{node.value}</span>;\n  }\n  return (\n    <div className=\"not-implemented\">\n      <MyST ast={node.children} />\n    </div>\n  );\n};\n\nconst MUnimpl = ({ node }: { node: any }) => {\n  if (!node.children) {\n    return <span>{node.value}</span>;\n  }\n  return (\n    <div className=\"not-implemented unimpl\">\n      <MyST ast={node.children} />\n    </div>\n  );\n};\n\nconst Param = ({ node }: { node: any }) => {\n  return (\n    <>\n      <dt>\n        {node.param}: {node.type_}\n      </dt>\n      <dd>\n        {node.desc.map((sub: any) => (\n          <MyST ast={sub} />\n        ))}\n      </dd>\n    </>\n  );\n};\nconst Parameters = ({ node }: { node: any }) => {\n  return (\n    <dl>\n      {node.children.map((item: any) => (\n        <MyST ast={item} />\n      ))}\n    </dl>\n  );\n};\n\nconst DefList = ({ node }: { node: any }) => {\n  return (\n    <dl>\n      {node.children.map((item: any) => (\n        <>\n          <dt>\n            <MyST ast={item.dt} />\n          </dt>\n          <dd>\n            {item.dd.map((sub: any) => (\n              <MyST ast={sub} />\n            ))}\n          </dd>\n        </>\n      ))}\n    </dl>\n  );\n};\n\n// render a single parameter in a signature\nconst ParameterNodeRenderer = ({ node }: { node: any }) => {\n  if (node.kind === '/') {\n    return <span>/</span>;\n  }\n  let comp = [];\n  let name = '';\n  if (node.kind === 'VAR_POSITIONAL') {\n    name = '*';\n  }\n  if (node.kind === 'VAR_KEYWORD') {\n    name += '**';\n  }\n  name += node.name;\n\n  comp = [<span>{name}</span>];\n\n  if (node.annotation.type !== 'Empty') {\n    comp.push(<span className=\"type-ann\">{': ' + node.annotation.data}</span>);\n  }\n  if (node.default.type !== 'Empty') {\n    comp.push(<span className=\"default-value\">{'=' + node.default.data}</span>);\n  }\n\n  return <>{comp}</>;\n};\n\nconst SignatureRenderer = ({ node }: { node: any }) => {\n  let prev = '';\n  const acc = [];\n  for (let i = 0; i < node.parameters.length; i++) {\n    const p = node.parameters[i];\n    if (p.kind !== 'POSITIONAL_ONLY' && prev === 'POSITIONAL_ONLY') {\n      acc.push({ kind: '/', type: 'ParameterNode' });\n    }\n    prev = p.kind;\n    acc.push(p);\n  }\n  return (\n    <code className=\"group signature\">\n      {node.kind.indexOf('async') !== -1 ||\n      node.kind.indexOf('coroutine') !== -1\n        ? 'async '\n        : ''}\n      def {node.target_name}(\n      <>\n        {/* TODO: insert the / from positional only */}\n        {acc.map((parameter, index, array) => {\n          if (index + 1 === array.length) {\n            return <MyST ast={parameter} />;\n          } else {\n            return (\n              <>\n                <MyST ast={parameter} />\n                <span className=\"signature-separator\">{', '}</span>\n              </>\n            );\n          }\n        })}\n      </>\n      {')'}\n      <span className=\"ret-ann\">\n        {node.return_annotation.data ? '-> ' + node.return_annotation.data : ''}\n      </span>\n      :\n    </code>\n  );\n};\n\nconst Directive = ({ node }: { node: any }) => {\n  const dom = node.domain !== null ? ':' + node.domain : '';\n  const role = node.role !== null ? ':' + node.role + ':' : '';\n  return (\n    <>\n      <code className=\"not-implemented\">\n        <span>\n          {dom}\n          {role}`{node.value}`\n        </span>\n      </code>\n    </>\n  );\n};\n\nconst LOC = {\n  signature: SignatureRenderer,\n  Directive: Directive,\n  DefList: DefList,\n  Parameters: Parameters,\n  ParameterNode: ParameterNodeRenderer,\n  Param: Param,\n  MUnimpl: MUnimpl,\n  DefaultComponent: DefaultComponent,\n  link: MyLink\n};\nexport const RENDERERS = { ...DEFAULT_RENDERERS, ...LOC };\n\nexport function MyPapyri({ node }: { node: any }) {\n  return <MyST ast={node.children} />;\n}\n","import { requestAPI } from './handler';\nimport { MyPapyri, RENDERERS, SearchContext } from './papyri-comp';\nimport { ReactWidget } from '@jupyterlab/apputils';\nimport { ThemeProvider } from '@myst-theme/providers';\nimport React from 'react';\n\n// this is a papyri react component that in the end should\n// have navigation UI and a myst renderer to display the\n// documentation.\n//\n// It is pretty bare bone for now, but might have a toolbar later.\n//\n// It would be nice to have this outside of the JupyterLab extension to be reusable\n//\n// I'm going to guess it will need some configuration hook for when we click on links.\n//\n//\nclass PapyriComponent extends React.Component {\n  state = {\n    possibilities: [],\n    navs: [],\n    root: {},\n    searchterm: ''\n  };\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      possibilities: [],\n      navs: [],\n      root: {},\n      searchterm: ''\n    };\n  }\n\n  setPossibilities(pos: any) {\n    this.setState({ possibilities: pos });\n  }\n\n  setNavs(navs: any) {\n    this.setState({ navs: navs });\n  }\n\n  setRoot(root: any) {\n    this.setState({ root: root });\n  }\n\n  setSearchTerm(searchterm: string) {\n    this.setState({ searchterm: searchterm });\n  }\n\n  async handleInputChange(event: any) {\n    console.log('on change, this is', this);\n    this.setSearchTerm(event.target.value);\n    this.search(event.target.value);\n  }\n\n  async back() {\n    this.state.navs.pop();\n    const pen = this.state.navs.pop();\n    if (pen !== undefined) {\n      console.log('Setting search term', pen);\n      await this.setSearchTerm(pen);\n      console.log('... and searchg for ', pen);\n      await this.search(pen);\n    }\n  }\n  async search(query: string) {\n    const res = await requestAPI<any>('get-example', {\n      body: query,\n      method: 'post'\n    });\n    console.log('Got a response for', query, 'res.body=', res.body);\n    // response has body (MySTâ€“json if the query has an exact match)\n    // and data if we have some close matches.\n    if (res.body !== null) {\n      this.setNavs([...this.state.navs, query]);\n      this.setRoot(res.body);\n      this.setPossibilities([]);\n    } else {\n      this.setRoot({});\n      this.setPossibilities(res.data);\n    }\n  }\n\n  async onClick(query: string) {\n    console.log('On click trigger', query, 'this is', this);\n\n    this.setSearchTerm(query);\n    try {\n      this.search(query);\n    } catch (e) {\n      console.error(e);\n    }\n    return false;\n  }\n\n  render(): JSX.Element {\n    return (\n      <React.StrictMode>\n        <input\n          onChange={this.handleInputChange.bind(this)}\n          value={this.state.searchterm}\n        />\n        <button onClick={this.back}>Back</button>\n        <ul>\n          {this.state.possibilities.map((e: any) => {\n            return (\n              <li>\n                <a\n                  href={e}\n                  onClick={async () => {\n                    await this.onClick(e);\n                  }}\n                >\n                  {e}\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"view\">\n          <SearchContext.Provider value={this.onClick.bind(this)}>\n            <ThemeProvider renderers={RENDERERS}>\n              <MyPapyri node={this.state.root} />\n            </ThemeProvider>\n          </SearchContext.Provider>\n        </div>\n      </React.StrictMode>\n    );\n  }\n}\n\n// This seem to be the way to have an adapter between lumino and react, and\n// allow to render react inside a JupyterLab panel\nexport class PapyriPanel extends ReactWidget {\n  constructor() {\n    super();\n    this.addClass('jp-ReactWidget');\n    this.id = 'papyri-browser';\n    this.title.label = 'Papyri browser';\n    this.title.closable = true;\n  }\n\n  render(): JSX.Element {\n    return <PapyriComponent />;\n  }\n}\n"],"names":[],"sourceRoot":""}