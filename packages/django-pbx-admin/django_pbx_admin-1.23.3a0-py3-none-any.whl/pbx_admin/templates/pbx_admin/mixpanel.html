<script type="text/javascript">
mixpanel.init("{{ mixpanel.project_token }}");

mixpanel.track("screen_view", {
  eventCategory: "adminPanel",
  instanceId: "{{ mixpanel.instance_name }}",
  screenTitle: document.title,
  screenType: "{{ page_type }}",
});

function sendEvent(eventCategory){
  let nameValue = "{{ event_object_value }}"
  if (!nameValue){
    nameValue = document.getElementById("id_name").value
  }

  mixpanel.track("{{ action_name }}",
      {
      eventCategory: eventCategory,
      instanceId: "{{ mixpanel.instance_name }}",
      screenTitle: document.title,
      eventObject: nameValue,
    }
  )
}
function addButtonListeners(selector, eventCategory) {
  let buttons = document.querySelectorAll(selector);
  buttons.forEach((button) => {
    button.addEventListener("click", () => sendEvent(eventCategory));
  });
}

// can be more saves buttons e.g. editor translations
addButtonListeners("button[name='_save']", "adminPanel");
addButtonListeners("button[name='_continue']", "adminPanel");

addButtonListeners("button[id='resend']", "adminPanel");

// buttons inside action dropdown menu which have mixpanel flag set
addButtonListeners(".dropdown-menu a[mixpanel='True']", "adminPanel");

// "main" edit buttons which have mixpanel flag set
addButtonListeners(".edit[mixpanel='True']", "adminPanel");



</script>
